function _0x1fc7(_0x269be6,_0x21d84b){const _0x1f2707=_0x4666();return _0x1fc7=function(_0x2af777,_0x4c819c){_0x2af777=_0x2af777-(-0x247*-0xa+0x4*-0x67+-0x1444);let _0x15650a=_0x1f2707[_0x2af777];if(_0x1fc7['sBSVcz']===undefined){var _0x39d2da=function(_0x35fee6){const _0x1bd16a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2441f4='',_0x295623='',_0x206066=_0x2441f4+_0x39d2da;for(let _0x50d6ca=0x1c33*0x1+-0x1931*-0x1+0x3564*-0x1,_0x142c40,_0x367ba2,_0x58a9fd=0x20*-0x2b+-0x469*-0x1+-0x1*-0xf7;_0x367ba2=_0x35fee6['charAt'](_0x58a9fd++);~_0x367ba2&&(_0x142c40=_0x50d6ca%(0x2539+0x4c2+0x1*-0x29f7)?_0x142c40*(-0x959*0x1+0x1fdd*-0x1+0x2976)+_0x367ba2:_0x367ba2,_0x50d6ca++%(0x21*0x3f+-0x1f*-0xdf+-0x231c))?_0x2441f4+=_0x206066['charCodeAt'](_0x58a9fd+(0x17*-0x66+-0x1c7*0x10+0x25a4))-(0x12*0xe7+-0x7f*0x2b+0x521)!==-0x1*-0x1741+-0x2630+-0x1*-0xeef?String['fromCharCode'](-0x2e*-0x98+0x178e+-0x31df&_0x142c40>>(-(0x20fe+0x75*-0x2+0x2012*-0x1)*_0x50d6ca&0x1e77+0x75e+-0x25cf)):_0x50d6ca:-0xbb9+0x24a0*-0x1+0x3059*0x1){_0x367ba2=_0x1bd16a['indexOf'](_0x367ba2);}for(let _0x56444b=0x3*0x9b6+0x390+0x5a*-0x5d,_0x25f3c4=_0x2441f4['length'];_0x56444b<_0x25f3c4;_0x56444b++){_0x295623+='%'+('00'+_0x2441f4['charCodeAt'](_0x56444b)['toString'](-0x728+-0x119+0x851*0x1))['slice'](-(-0x2353+-0x2*-0x5b6+0x1*0x17e9));}return decodeURIComponent(_0x295623);};_0x1fc7['sdGJAO']=_0x39d2da,_0x269be6=arguments,_0x1fc7['sBSVcz']=!![];}const _0x3b1679=_0x1f2707[0x520+-0x99b+0x1f*0x25],_0x49d6c3=_0x2af777+_0x3b1679,_0x37ee60=_0x269be6[_0x49d6c3];if(!_0x37ee60){const _0x40acdb=function(_0x349558){this['MPHdqD']=_0x349558,this['vdgfLr']=[0x263+0x198*0x9+0x1*-0x10ba,0x1b5b*0x1+0x1284+-0x2ddf,-0xb0*0x1+0x151*-0x7+0x9e7],this['WjjhLl']=function(){return'newState';},this['WtrAUi']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['qGbJOI']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x40acdb['prototype']['TnuqPB']=function(){const _0x17c2aa=new RegExp(this['WtrAUi']+this['qGbJOI']),_0x32b91d=_0x17c2aa['test'](this['WjjhLl']['toString']())?--this['vdgfLr'][-0x17*-0xf7+-0x2486+0xe56]:--this['vdgfLr'][0x61b*0x1+-0x309+0x1*-0x312];return this['cisLKk'](_0x32b91d);},_0x40acdb['prototype']['cisLKk']=function(_0x4cb66f){if(!Boolean(~_0x4cb66f))return _0x4cb66f;return this['QGnhxF'](this['MPHdqD']);},_0x40acdb['prototype']['QGnhxF']=function(_0x179c4c){for(let _0x4b1f56=0x3d8*-0xa+0x41+0x262f,_0x777dab=this['vdgfLr']['length'];_0x4b1f56<_0x777dab;_0x4b1f56++){this['vdgfLr']['push'](Math['round'](Math['random']())),_0x777dab=this['vdgfLr']['length'];}return _0x179c4c(this['vdgfLr'][-0x2*-0x48f+-0x1b95+0x1277]);},new _0x40acdb(_0x1fc7)['TnuqPB'](),_0x15650a=_0x1fc7['sdGJAO'](_0x15650a),_0x269be6[_0x49d6c3]=_0x15650a;}else _0x15650a=_0x37ee60;return _0x15650a;},_0x1fc7(_0x269be6,_0x21d84b);}(function(_0x4e7563,_0x5e9d83){const _0x5572f5={_0x3ef9f2:0x9e,_0x498315:0x97,_0x1b379e:0x98,_0x44a1f9:0x95,_0x139bf5:0x90,_0x288322:0x99,_0x30af88:0x97,_0x370e69:0x93,_0x17f83c:0x96,_0xa2f2a5:0x94,_0x30cfc0:0x2c1,_0x50495a:0x2ae,_0x4566dc:0x2ad,_0x3e1f5b:0x94,_0xa7c240:0x8a,_0xe570e3:0x8f,_0x400e0c:0x2b6,_0x5159ef:0x2ac,_0x200aca:0x8d,_0x547ad7:0x9d,_0x121838:0x2b2,_0x40247a:0x2a7,_0x2ab4df:0x2bb,_0x5c9b77:0x2c4,_0x4c7280:0x2bc,_0xc30ae:0x8d,_0x2b1676:0x83,_0x5de656:0x84,_0x2b2f6d:0x82,_0x37b1da:0x91,_0x41b258:0x89,_0x10d9c1:0x86,_0x51b4ed:0x77},_0x21bd7f={_0x3b904d:0x64},_0x309468={_0xb68e91:0x1c0};function _0x53cdab(_0xf07632,_0x447f57,_0x5bcd5f,_0x1aa3cc){return _0x1fc7(_0x1aa3cc-_0x309468._0xb68e91,_0x5bcd5f);}const _0x49e39e=_0x4e7563();function _0x5b71c5(_0x20620c,_0x525379,_0x1324fc,_0x52db85){return _0x1fc7(_0x525379- -_0x21bd7f._0x3b904d,_0x1324fc);}while(!![]){try{const _0xcf0648=parseInt(_0x5b71c5(_0x5572f5._0x3ef9f2,_0x5572f5._0x498315,0x90,_0x5572f5._0x1b379e))/(-0x1c87+0x12*-0x115+0x2*0x1801)*(-parseInt(_0x5b71c5(_0x5572f5._0x44a1f9,_0x5572f5._0x139bf5,_0x5572f5._0x288322,_0x5572f5._0x30af88))/(0x3*-0x98d+0x231a+-0x671))+parseInt(_0x5b71c5(_0x5572f5._0x370e69,_0x5572f5._0x17f83c,_0x5572f5._0xa2f2a5,0x9b))/(-0x1*-0x1195+0x20c0+-0x3252)+-parseInt(_0x53cdab(_0x5572f5._0x30cfc0,_0x5572f5._0x50495a,_0x5572f5._0x4566dc,0x2b9))/(0x50e+0x19c6+-0x8*0x3da)*(parseInt(_0x5b71c5(_0x5572f5._0x3e1f5b,_0x5572f5._0xa7c240,_0x5572f5._0xe570e3,_0x5572f5._0xa7c240))/(0x1484+0xb6*-0x7+0xf85*-0x1))+-parseInt(_0x53cdab(_0x5572f5._0x4566dc,0x2b7,_0x5572f5._0x400e0c,_0x5572f5._0x5159ef))/(-0xca+-0x1212*0x1+0x1*0x12e2)*(parseInt(_0x5b71c5(_0x5572f5._0x200aca,_0x5572f5._0x288322,0x9e,_0x5572f5._0x547ad7))/(0x1598+0x21e2+-0x3773))+-parseInt(_0x53cdab(_0x5572f5._0x121838,_0x5572f5._0x40247a,_0x5572f5._0x5159ef,0x2ab))/(0x2e*-0xbb+0x245f+-0x2bd*0x1)*(-parseInt(_0x53cdab(_0x5572f5._0x2ab4df,_0x5572f5._0x5c9b77,0x2c3,_0x5572f5._0x4c7280))/(0x15e6+0xb*-0x257+0x3e0))+parseInt(_0x5b71c5(_0x5572f5._0xc30ae,_0x5572f5._0x2b1676,_0x5572f5._0x5de656,_0x5572f5._0x2b2f6d))/(-0x84a+0x329*-0x1+0xb7d)*(-parseInt(_0x5b71c5(_0x5572f5._0x200aca,0x8b,_0x5572f5._0x37b1da,_0x5572f5._0x41b258))/(-0xfa8+-0x33f*0x2+0x1*0x1631))+parseInt(_0x5b71c5(_0x5572f5._0x10d9c1,_0x5572f5._0x2b2f6d,_0x5572f5._0x51b4ed,_0x5572f5._0x2b1676))/(-0x1042*-0x1+0x6e*-0x38+0x7da);if(_0xcf0648===_0x5e9d83)break;else _0x49e39e['push'](_0x49e39e['shift']());}catch(_0x27a2da){_0x49e39e['push'](_0x49e39e['shift']());}}}(_0x4666,-0x3af01+0x48de4+-0x608e*-0xb));const _0x2fd0c3=(function(){const _0x58baf9={_0x1bfedb:0x2b1,_0x9d3289:0x2b4,_0x232d07:0x2a2,_0x4e1bd1:0x2a9},_0x10822f={_0x532d30:0x3a8};let _0x32c9ca=!![];return function(_0x49d47e,_0x2762e5){const _0x1fe122={_0x336993:0x53,_0x3bb660:0x47},_0x1d014d={_0x2e0634:0x9e,_0x28ddb7:0x269},_0x24891a={_0x595ae6:0x3a4},_0x16d914={};function _0x1f1003(_0x3eac8d,_0x4831de,_0x487bac,_0x37cc98){return _0x1fc7(_0x37cc98- -_0x10822f._0x532d30,_0x3eac8d);}_0x16d914[_0x2501bb(-_0x58baf9._0x1bfedb,-0x2b8,-_0x58baf9._0x9d3289,-0x2ad)]='qREwT';function _0x2501bb(_0x152ab8,_0x46e5c5,_0x20a19c,_0x442187){return _0x1fc7(_0x20a19c- -_0x24891a._0x595ae6,_0x442187);}_0x16d914[_0x2501bb(-_0x58baf9._0x232d07,-0x2a5,-0x2ac,-_0x58baf9._0x4e1bd1)]='VKNrs';const _0x55038f=_0x16d914,_0x537ec3=_0x32c9ca?function(){function _0x25de6b(_0x44f4ee,_0xefe487,_0x41e912,_0x4556c2){return _0x1f1003(_0x41e912,_0xefe487-_0x1d014d._0x2e0634,_0x41e912-0xb3,_0xefe487-_0x1d014d._0x28ddb7);}if(_0x2762e5){if(_0x55038f['GAYIP']===_0x55038f['fWQno']){_0x429e4e._community=null;_0x25d6e9.session_key=null;if(_0x45491d!==_0x123708){this.invcontexts=_0x411302.keys(_0x23f79c);}this.axios.post('updateAccountData',{login:_0x268ab2.data.username,session_key:this.xbot_session,account:_0x238d91,inventoryContexts:_0x2843a2,wallet:_0xaa4a6}).then(function(response){_0x14d545(response);}).catch(function(error){_0x18a36f(error);_0x5c552d.error('Error:',error.response.data);});}else{const _0x57fff4=_0x2762e5[_0x25de6b(-_0x1fe122._0x336993,-0x4a,-0x4f,-_0x1fe122._0x3bb660)](_0x49d47e,arguments);return _0x2762e5=null,_0x57fff4;}}}:function(){};return _0x32c9ca=![],_0x537ec3;};}()),_0xb51474=_0x2fd0c3(this,function(){const _0x479415={_0x434555:0x359,_0x23ad02:0x362,_0x11ffef:0x35b,_0x43d864:0x365,_0x43d328:0x35a,_0x28293d:0x353,_0x270a5f:0x361,_0x453594:0x353,_0x24efe9:0x34e,_0x286a87:0x354,_0x3d4ba2:0x35e,_0x588fe6:0x34b,_0x4895a2:0x355,_0x57706e:0x345,_0x36eb8c:0x34a,_0x1f3a54:0x34d,_0x1f753d:0x360},_0x5f5217={_0xb6bc96:0x263},_0x209d68={_0x512584:0x25d},_0x4b4df1={};_0x4b4df1[_0x49b68b(_0x479415._0x434555,_0x479415._0x23ad02,_0x479415._0x11ffef,_0x479415._0x43d864)]=_0x49b68b(_0x479415._0x43d328,_0x479415._0x28293d,_0x479415._0x270a5f,0x35f)+'+$';function _0x4f200d(_0x4cdcc5,_0x41d05d,_0x5d2423,_0x3cf173){return _0x1fc7(_0x41d05d-_0x209d68._0x512584,_0x4cdcc5);}function _0x49b68b(_0x50a5e0,_0x49820b,_0x369243,_0x1de1de){return _0x1fc7(_0x50a5e0-_0x5f5217._0xb6bc96,_0x369243);}const _0x122d4d=_0x4b4df1;return _0xb51474['toString']()[_0x4f200d(_0x479415._0x453594,_0x479415._0x24efe9,_0x479415._0x286a87,0x34b)](_0x49b68b(_0x479415._0x43d328,0x360,0x35d,_0x479415._0x3d4ba2)+'+$')[_0x49b68b(_0x479415._0x588fe6,0x346,_0x479415._0x4895a2,_0x479415._0x57706e)]()['constructo'+'r'](_0xb51474)[_0x49b68b(0x354,_0x479415._0x36eb8c,_0x479415._0x1f3a54,_0x479415._0x1f753d)](_0x122d4d['NWFOr']);});_0xb51474();const axios=require('axios');function _0x2fa773(_0x473502,_0x5301e1,_0x3cf61f,_0xeb27f3){const _0x59510f={_0x38bfba:0xf5};return _0x1fc7(_0x5301e1-_0x59510f._0x38bfba,_0xeb27f3);}function _0xc40f94(_0x46284b,_0x113e30,_0x42be58,_0x2ecc2f){const _0x3e7ec5={_0x2028be:0x9c};return _0x1fc7(_0x113e30-_0x3e7ec5._0x2028be,_0x2ecc2f);}const https=require(_0x2fa773(0x1f3,0x1e8,0x1eb,0x1ee)),SteamTotp=require(_0xc40f94(0x189,0x18e,0x185,0x18c)),xbsteam=require(_0xc40f94(0x18e,0x185,0x180,0x17e)),_0x31cf08={};_0x31cf08[_0xc40f94(0x183,0x186,0x17b,0x17d)+_0x2fa773(0x1e0,0x1e2,0x1e7,0x1dc)]=![];const httpsAgent=new https['Agent'](_0x31cf08);module['exports']=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.checkAbilityToTrade(job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'true',{error:e.message});});break;case 7:await global.xbsteam.sendTradeOffer(job.context.steam_id,job.context.items,job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.setConfirmationStatus(job.context.confirmation_id,job.context.key,job.context.accept).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.cancelTradeOffer(job.context.trade_offer_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.acceptTradeOffer(job.context.trade_offer_id,job.context.partner).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 11:await global.xbsteam.updateTradeOffers().then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 12:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 13:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 14:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 15:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 16:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');console.log(job.type);new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async sendConfirmations(){const self=this;global.sc.wait();await global.xbsteam.getConfirmations().then(function(data){self.axios.post('updateConfirmations',{login:global.data.username,session_key:global.xbot.xbot_session,confirmations:data}).then(function(response){console.log('Отправлено '+data.length+' Confirmations');}).catch(function(error){console.log(error.message);});}).catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log(e.response?.data);console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations===0||global.data.needToSendConfirmations===true){console.log(this.prefix+'Проверяю аутентификатор');await this.sendConfirmations();global.data.needToSendConfirmations=false;await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping===0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory===0||tickCounter===2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders===0||tickCounter===2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory===0||tickCounter===2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};function _0x4666(){const _0x412699=['tLDgt3i','kcGOlISPkYKRkq','zLDrBM8','ogXiuufLwG','odm1mZiZyxrnyKPc','mtzctezPywi','mtiWmdmZExjzAhvT','mJfVEwj6Awu','mti0mJuZodHXs0fSrgu','mJmWsxrPCgH4','Dg9tDhjPBMC','lI9ZDgvHBq','CMvQzwn0vw5HDq','mtG0AwDkruft','mtC1mtC2uxLYBvLU','DgHVCML6zwq','mti2nZa4nu5mwM11uG','mJa4nZu4BuHRuNDy','r0fzsva','C2vHCMnO','C3rLyw0TDg90Ca','Ahr0Chm','mZi1otzdvxvurhm','yxbWBhK'];_0x4666=function(){return _0x412699;};return _0x4666();}