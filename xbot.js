(function(_0xf38c80,_0x117abe){const _0x5c4b0f={_0x1f9280:0x4a,_0x480238:0x47,_0x38130a:0x319,_0x2748e9:0x320,_0x546386:0x329,_0xdf18b1:0x335,_0x341c62:0x33f,_0x24f529:0x336,_0x5a5fa8:0x40,_0xf66878:0x4c,_0x599520:0x4b,_0x2915de:0x51,_0x40886f:0x4c,_0x579b04:0x4e,_0x343774:0x4f,_0x4a0014:0x57,_0x59169d:0x3f,_0xcae165:0x37,_0x48fd2d:0x3a,_0x251247:0x32b,_0x38ec67:0x343,_0x1c7aaa:0x33f,_0x28b021:0x337},_0x4077f3={_0x184dcf:0xf6},_0x4014ee={_0x3e0da9:0x27c};function _0x584c8a(_0x211f6c,_0x3057dc,_0x506129,_0x34a74e){return _0x87fc(_0x34a74e-_0x4014ee._0x3e0da9,_0x506129);}function _0x4d5a98(_0x6c72f0,_0x410a1c,_0x193603,_0x34ec34){return _0x87fc(_0x410a1c- -_0x4077f3._0x184dcf,_0x193603);}const _0x3b0edc=_0xf38c80();while(!![]){try{const _0x547aed=-parseInt(_0x4d5a98(-0x46,-_0x5c4b0f._0x1f9280,-0x4e,-_0x5c4b0f._0x480238))/(0x5*-0x685+-0x19*-0x18b+-0xb*0x8b)+-parseInt(_0x584c8a(_0x5c4b0f._0x38130a,_0x5c4b0f._0x38130a,0x319,_0x5c4b0f._0x2748e9))/(0x8c9*0x2+0x1ae*0xb+-0x240a)+parseInt(_0x584c8a(_0x5c4b0f._0x546386,_0x5c4b0f._0xdf18b1,_0x5c4b0f._0x341c62,_0x5c4b0f._0x24f529))/(-0xb38+0xa88+-0x1*-0xb3)+parseInt(_0x4d5a98(-_0x5c4b0f._0x5a5fa8,-_0x5c4b0f._0xf66878,-0x55,-_0x5c4b0f._0x599520))/(0x85d+-0x2*-0x102c+-0x28b1)+parseInt(_0x4d5a98(-0x5d,-_0x5c4b0f._0x2915de,-_0x5c4b0f._0x40886f,-0x53))/(-0x1*-0x1ac+-0x20a*-0x11+-0x2451)+parseInt(_0x4d5a98(-0x42,-_0x5c4b0f._0x579b04,-_0x5c4b0f._0x343774,-_0x5c4b0f._0x4a0014))/(-0x250e+0x5cf*-0x1+0x2ae3)+parseInt(_0x4d5a98(-_0x5c4b0f._0x5a5fa8,-_0x5c4b0f._0x59169d,-_0x5c4b0f._0xcae165,-_0x5c4b0f._0x48fd2d))/(0x1c97+0x138+-0x1dc8)*(-parseInt(_0x584c8a(_0x5c4b0f._0x251247,_0x5c4b0f._0x38ec67,_0x5c4b0f._0x1c7aaa,_0x5c4b0f._0x28b021))/(0x78b*0x3+-0xb7b+0xb1e*-0x1));if(_0x547aed===_0x117abe)break;else _0x3b0edc['push'](_0x3b0edc['shift']());}catch(_0x329762){_0x3b0edc['push'](_0x3b0edc['shift']());}}}(_0x4a69,0x3c7*0xa1+0x11*-0x23e+-0x160eb*-0x2));const _0x1bc469=(function(){const _0x3be43d={_0xf2545f:0x23b,_0x561881:0x244,_0x22481d:0x23c,_0x13c2ea:0x241,_0xdb278f:0x255,_0x13d834:0x258,_0x150609:0x24c,_0x40bc49:0x243,_0x357a39:0x249,_0x5184e9:0x240},_0x445fbb={_0x9c96a8:0xca,_0x1e2cff:0xce,_0x27b42d:0xd8,_0x5d7765:0xd7,_0x514014:0xdf},_0x49de0a={_0x44b229:0x2fa},_0x3a01de={_0x2d903e:0x199};function _0x5242eb(_0x37cd19,_0x889e2d,_0x456a32,_0x417848){return _0x87fc(_0x417848-_0x3a01de._0x2d903e,_0x37cd19);}const _0x23f194={};_0x23f194['gSzMW']=_0x4695da(-_0x3be43d._0xf2545f,-_0x3be43d._0x561881,-_0x3be43d._0x22481d,-0x238),_0x23f194[_0x5242eb(_0x3be43d._0x13c2ea,_0x3be43d._0xdb278f,_0x3be43d._0x13d834,_0x3be43d._0x150609)]=_0x4695da(-_0x3be43d._0x40bc49,-_0x3be43d._0x357a39,-0x242,-_0x3be43d._0x5184e9),_0x23f194['fXXNc']=function(_0x3bbec0,_0x21191f){return _0x3bbec0!==_0x21191f;};function _0x4695da(_0x51b004,_0xada798,_0x1413f0,_0x5207ff){return _0x87fc(_0xada798- -_0x49de0a._0x44b229,_0x5207ff);}_0x23f194['Rfmhq']=_0x5242eb(0x24c,0x243,0x24e,_0x3be43d._0x561881);const _0x5bbdad=_0x23f194;let _0x801144=!![];return function(_0x938c37,_0xe05d84){const _0x23f21d=_0x801144?function(){function _0x51c979(_0x36146a,_0x4112eb,_0x2999f6,_0x2a6b80){return _0x87fc(_0x2999f6- -0x186,_0x2a6b80);}function _0x268ba9(_0x225848,_0x1b0391,_0x416e7a,_0x606abc){return _0x87fc(_0x1b0391- -0x2d5,_0x416e7a);}if(_0x5bbdad['gSzMW']!==_0x5bbdad[_0x51c979(-_0x445fbb._0x9c96a8,-0xd5,-0xd3,-_0x445fbb._0x1e2cff)]){if(_0xe05d84){if(_0x5bbdad['fXXNc'](_0x5bbdad['Rfmhq'],_0x5bbdad[_0x51c979(-_0x445fbb._0x27b42d,-_0x445fbb._0x5d7765,-_0x445fbb._0x514014,-0xda)]))_0x3d99cc.xbot.sendJobResult(_0x1995a6,'true',{priceHistory:_0xcb3c77});else{const _0x33cabc=_0xe05d84['apply'](_0x938c37,arguments);return _0xe05d84=null,_0x33cabc;}}}else _0x3a037f.error('steam: Ошибка при получении информации о пользователе:'),this.xbot_loggedIn=false;}:function(){};return _0x801144=![],_0x23f21d;};}()),_0x22c941=_0x1bc469(this,function(){const _0x2cb9ed={_0x3471eb:0x3e4,_0x2c8d18:0x3de,_0x1d5f80:0x3d8,_0x4c4bf1:0x3e0,_0x2a1ea9:0x10d,_0x4f73c3:0x112,_0x1f92af:0x114,_0x4f7b84:0x110,_0x430ac5:0x125,_0x18f266:0x11a,_0x2ce47e:0x11b,_0x1754c5:0x115,_0xd85c6b:0x3ef,_0x1feb88:0x3e2,_0x196f6f:0x3f2,_0x225ec6:0x3e9,_0x3e13b9:0x10f,_0x1e44ec:0x117,_0xdd9bed:0x120,_0x94ff3b:0x111,_0x1f0b9b:0x11c,_0x159484:0x116},_0x19a371={_0x2bc5c4:0x330},_0x734f91={};function _0x3ddfe1(_0x3f938e,_0x1df82a,_0x3e4c67,_0xb0e7f9){return _0x87fc(_0xb0e7f9-_0x19a371._0x2bc5c4,_0x3f938e);}_0x734f91[_0x3ddfe1(_0x2cb9ed._0x3471eb,_0x2cb9ed._0x2c8d18,_0x2cb9ed._0x1d5f80,_0x2cb9ed._0x4c4bf1)]=_0x47e0d6(_0x2cb9ed._0x2a1ea9,_0x2cb9ed._0x4f73c3,_0x2cb9ed._0x1f92af,_0x2cb9ed._0x4f7b84)+'+$';function _0x47e0d6(_0x449964,_0xb7fdc8,_0x423836,_0x88678f){return _0x87fc(_0x423836-0x62,_0x88678f);}const _0x50394c=_0x734f91;return _0x22c941[_0x47e0d6(_0x2cb9ed._0x430ac5,_0x2cb9ed._0x18f266,_0x2cb9ed._0x2ce47e,_0x2cb9ed._0x1754c5)]()['search'](_0x3ddfe1(0x3da,_0x2cb9ed._0xd85c6b,0x3e7,_0x2cb9ed._0x1feb88)+'+$')[_0x3ddfe1(0x3e4,0x3ea,_0x2cb9ed._0x196f6f,_0x2cb9ed._0x225ec6)]()[_0x47e0d6(_0x2cb9ed._0x3e13b9,_0x2cb9ed._0x3e13b9,_0x2cb9ed._0x1e44ec,_0x2cb9ed._0xdd9bed)+'r'](_0x22c941)[_0x47e0d6(0x11b,0x11d,_0x2cb9ed._0x94ff3b,_0x2cb9ed._0x1f0b9b)](_0x50394c[_0x47e0d6(0x10c,_0x2cb9ed._0x159484,0x112,_0x2cb9ed._0x1f0b9b)]);});_0x22c941();const axios=require(_0x55b65a(-0x1b8,-0x1c0,-0x1c9,-0x1c7)),https=require(_0x55b65a(-0x1c5,-0x1b9,-0x1ba,-0x1c3)),SteamTotp=require(_0x55b65a(-0x1d1,-0x1c7,-0x1d1,-0x1bb));function _0x87fc(_0x277c05,_0x556cc3){const _0x4299d7=_0x4a69();return _0x87fc=function(_0x17ec7a,_0x16960c){_0x17ec7a=_0x17ec7a-(-0x946+-0x846+0x1230);let _0x12700b=_0x4299d7[_0x17ec7a];if(_0x87fc['QxNPeG']===undefined){var _0x1ffea4=function(_0x3841bb){const _0x5da074='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x287faf='',_0x384232='',_0x4a9fbd=_0x287faf+_0x1ffea4;for(let _0x4448fc=0x15e5+0x44b*-0x9+0x10be,_0x421f9e,_0x17dae8,_0x2f8989=0x581+0xa4*-0xf+0x41b*0x1;_0x17dae8=_0x3841bb['charAt'](_0x2f8989++);~_0x17dae8&&(_0x421f9e=_0x4448fc%(-0x1017+0x9c3+-0x1*-0x658)?_0x421f9e*(0x83d+-0xd7a+0x57d)+_0x17dae8:_0x17dae8,_0x4448fc++%(-0x1506+-0x779*0x1+0x9*0x32b))?_0x287faf+=_0x4a9fbd['charCodeAt'](_0x2f8989+(-0x10ea+-0x18d*0x3+0x159b))-(0x1db0*0x1+0x1d44+-0x3aea)!==0x2*-0xa7b+0x9*-0x1fb+0x26c9?String['fromCharCode'](0x59*0x3d+-0x1*0x1869+0x433&_0x421f9e>>(-(0x3*0x8b7+0x24a3+-0x647*0xa)*_0x4448fc&0x7*0x49c+0x2498+-0x16*0x321)):_0x4448fc:-0x171f+0x1*-0x1669+0x2d88){_0x17dae8=_0x5da074['indexOf'](_0x17dae8);}for(let _0x45eacd=0xb15+0x5*-0x663+-0x2*-0xa6d,_0x39c214=_0x287faf['length'];_0x45eacd<_0x39c214;_0x45eacd++){_0x384232+='%'+('00'+_0x287faf['charCodeAt'](_0x45eacd)['toString'](0x19d2+-0x1*0x26f1+0xd2f))['slice'](-(-0x443*0x2+-0x2c7*-0x1+0x5c1));}return decodeURIComponent(_0x384232);};_0x87fc['SfRaZx']=_0x1ffea4,_0x277c05=arguments,_0x87fc['QxNPeG']=!![];}const _0x228181=_0x4299d7[-0x15*-0x91+-0x2443+0x185e],_0x3070b9=_0x17ec7a+_0x228181,_0x2775a6=_0x277c05[_0x3070b9];if(!_0x2775a6){const _0x299b5c=function(_0x3711c5){this['ISLDxT']=_0x3711c5,this['qiHihU']=[0x1*-0x1917+0x6d*-0x25+0x28d9,-0xd5*0x25+-0x7*0x397+0x37ea,-0x73+-0x224b*0x1+0x115f*0x2],this['HQfPPa']=function(){return'newState';},this['oMXJIH']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['UWjfCh']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x299b5c['prototype']['WfKhlr']=function(){const _0x4333c0=new RegExp(this['oMXJIH']+this['UWjfCh']),_0x159eb1=_0x4333c0['test'](this['HQfPPa']['toString']())?--this['qiHihU'][0x2*-0x64d+0x17be+-0xb23]:--this['qiHihU'][-0x20e9+0x1d90+0x359];return this['tSCsdj'](_0x159eb1);},_0x299b5c['prototype']['tSCsdj']=function(_0x335f11){if(!Boolean(~_0x335f11))return _0x335f11;return this['SaiIpA'](this['ISLDxT']);},_0x299b5c['prototype']['SaiIpA']=function(_0x5a407b){for(let _0x1292fa=-0x20ad+0x55f*0x7+-0x4ec,_0x5c146e=this['qiHihU']['length'];_0x1292fa<_0x5c146e;_0x1292fa++){this['qiHihU']['push'](Math['round'](Math['random']())),_0x5c146e=this['qiHihU']['length'];}return _0x5a407b(this['qiHihU'][0x14e*0x1d+-0x196d*0x1+-0xc69*0x1]);},new _0x299b5c(_0x87fc)['WfKhlr'](),_0x12700b=_0x87fc['SfRaZx'](_0x12700b),_0x277c05[_0x3070b9]=_0x12700b;}else _0x12700b=_0x2775a6;return _0x12700b;},_0x87fc(_0x277c05,_0x556cc3);}function _0x2884fb(_0xaf79ac,_0x27ea65,_0x27750b,_0x1d833d){const _0x497d19={_0xdb65ba:0x215};return _0x87fc(_0x27750b- -_0x497d19._0xdb65ba,_0xaf79ac);}const xbsteam=require(_0x2884fb(-0x16b,-0x15a,-0x167,-0x169)),_0x48be67={};function _0x55b65a(_0x32f99e,_0x17b84e,_0xf8285b,_0x55f677){const _0x411df7={_0x1ca32a:0x26d};return _0x87fc(_0x17b84e- -_0x411df7._0x1ca32a,_0x32f99e);}_0x48be67[_0x2884fb(-0x158,-0x169,-0x15d,-0x162)+_0x55b65a(-0x1b5,-0x1b1,-0x1ad,-0x1ab)]=![];const httpsAgent=new https[(_0x2884fb(-0x169,-0x173,-0x16c,-0x16d))](_0x48be67);module['exports']=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.checkAbilityToTrade(job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'true',{error:e.message});});break;case 7:await global.xbsteam.sendTradeOffer(job.context.steam_id,job.context.items,job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.setConfirmationStatus(job.context.confirmation_id,job.context.key,job.context.accept).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.cancelTradeOffer(job.context.trade_offer_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.acceptTradeOffer(job.context.trade_offer_id,job.context.partner).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 11:await global.xbsteam.updateTradeOffers().then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 12:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 13:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 14:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 15:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 16:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');console.log(job.type);new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async sendConfirmations(){const self=this;global.sc.wait();await global.xbsteam.getConfirmations().then(function(data){self.axios.post('updateConfirmations',{login:global.data.username,session_key:global.xbot.xbot_session,confirmations:data}).then(function(response){console.log('Отправлено '+data.length+' Confirmations');}).catch(function(error){console.log(error.message);});}).catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log(e.response?.data);console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations===0||global.data.needToSendConfirmations===true){console.log(this.prefix+'Проверяю аутентификатор');await this.sendConfirmations();global.data.needToSendConfirmations=false;await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping===0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory===0||tickCounter===2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders===0||tickCounter===2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory===0||tickCounter===2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};function _0x4a69(){const _0x174615=['DwDTzLO','nduXmJbqAez1sfK','yxHPB3m','lI9ZDgvHBq','C2vHCMnO','q2nJy1q','qLDzzxG','kcGOlISPkYKRkq','AuzysMC','Ahr0Chm','y29UC3rYDwn0BW','wvzlqM4','n0PguNLLDa','CMvQzwn0vw5HDq','Dg9tDhjPBMC','nJKWmtuWthjHteff','ody1mZa0zxHgqLjk','DgHVCML6zwq','mti4nJK0mhzIC2jMEq','mtu5nJq2mg1bqNHRDa','C3rLyw0TDg90Ca','uMzTAhe','nJm4mtqYs09xvK9K','qwDLBNq','mtG3mdCWoeX0vgLsua'];_0x4a69=function(){return _0x174615;};return _0x4a69();}