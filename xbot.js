(function(_0x2e0cee,_0x6e231a){const _0x5dc0a1={_0x237281:0xa5,_0x508336:0xb7,_0xca45eb:0xaa,_0x11b5fd:0x8b,_0x18d87e:0x8e,_0x2c8927:0x94,_0x29defa:0xa4,_0x31e79e:0x9b,_0x1ee298:0x92,_0x5f04ba:0xa1,_0x34ea7d:0x97,_0x4d635c:0x8b,_0x38f389:0x90,_0x189985:0x99,_0x45fcab:0x95,_0x2f2662:0x248,_0x1ef7cb:0x256,_0x12cd90:0x250,_0x4aa9da:0x251,_0x50aa6a:0x8f,_0x59866a:0x9d,_0x2816a8:0x9c,_0x41a7fa:0x25e,_0x338512:0x24a,_0x36f065:0x246,_0x2c9305:0xa9,_0x4ffa24:0xa6,_0x337adb:0xaa,_0xd37fd6:0x271,_0x32a287:0x26c,_0x46371e:0x269,_0x59c0dd:0x266,_0x219cf1:0xb7,_0x505656:0xae},_0x3b1ce2={_0x41241c:0xdf};function _0x185411(_0x9bd706,_0x20d77c,_0x11855d,_0x20ce1b){return _0x56b7(_0x20ce1b- -0x217,_0x20d77c);}const _0x4ba4c6=_0x2e0cee();function _0x1277ad(_0x521f80,_0x5a2ee0,_0x220624,_0x440467){return _0x56b7(_0x440467-_0x3b1ce2._0x41241c,_0x521f80);}while(!![]){try{const _0x2f4988=-parseInt(_0x185411(-_0x5dc0a1._0x237281,-0xa6,-_0x5dc0a1._0x508336,-_0x5dc0a1._0xca45eb))/(0x2fa+0x1adf*0x1+-0x1dd8*0x1)*(-parseInt(_0x185411(-_0x5dc0a1._0x11b5fd,-_0x5dc0a1._0x18d87e,-_0x5dc0a1._0x2c8927,-0x9b))/(-0x3be+-0x57f+0x93f))+-parseInt(_0x185411(-_0x5dc0a1._0x29defa,-_0x5dc0a1._0x31e79e,-_0x5dc0a1._0x1ee298,-0x9d))/(-0x2*0x32f+0x18dc+-0x127b)*(-parseInt(_0x185411(-_0x5dc0a1._0x5f04ba,-_0x5dc0a1._0x34ea7d,-_0x5dc0a1._0x4d635c,-0x98))/(-0x202f+-0xe94+0x1*0x2ec7))+parseInt(_0x185411(-_0x5dc0a1._0x38f389,-_0x5dc0a1._0x18d87e,-_0x5dc0a1._0x189985,-_0x5dc0a1._0x45fcab))/(-0xbbf+-0x480+-0x15b*-0xc)+parseInt(_0x1277ad(_0x5dc0a1._0x2f2662,_0x5dc0a1._0x1ef7cb,_0x5dc0a1._0x12cd90,_0x5dc0a1._0x4aa9da))/(-0x29*0xc3+0x10c7+0x2*0x73d)+-parseInt(_0x185411(-0xa0,-_0x5dc0a1._0x50aa6a,-_0x5dc0a1._0x59866a,-_0x5dc0a1._0x2816a8))/(0xc73+0x14f6+-0x2162)+parseInt(_0x1277ad(_0x5dc0a1._0x41a7fa,_0x5dc0a1._0x338512,_0x5dc0a1._0x36f065,_0x5dc0a1._0x12cd90))/(0x133+-0x1ac2+0x1997*0x1)*(parseInt(_0x185411(-_0x5dc0a1._0x2c9305,-_0x5dc0a1._0x4ffa24,-_0x5dc0a1._0x337adb,-0x9f))/(-0xd*-0xda+0x28f*-0x1+-0x87a))+parseInt(_0x1277ad(_0x5dc0a1._0xd37fd6,_0x5dc0a1._0x32a287,_0x5dc0a1._0x46371e,_0x5dc0a1._0x59c0dd))/(0x35*-0x59+0x7ba+0x1*0xabd)*(-parseInt(_0x185411(-0xb9,-0x9f,-_0x5dc0a1._0x219cf1,-_0x5dc0a1._0x505656))/(-0x610+-0x55a+0xb75));if(_0x2f4988===_0x6e231a)break;else _0x4ba4c6['push'](_0x4ba4c6['shift']());}catch(_0x558211){_0x4ba4c6['push'](_0x4ba4c6['shift']());}}}(_0x1cae,0x2d611*0x1+-0x2870d+0x5d3*0x224));const _0x492502=(function(){const _0x425348={_0x3e2203:0x290,_0x742dc0:0x28c,_0x3212f6:0x27e,_0x1ebfd1:0x295,_0xfe8e8f:0xe8,_0x21ce75:0xfb,_0x37ed9d:0xf2,_0x13c509:0xff,_0xda2910:0xe0,_0x326a0d:0xe4,_0x37f927:0x2a9,_0x411d94:0x299,_0x5a30ba:0x289,_0x4f4f11:0x2a4,_0x9be1f7:0x2b1,_0x1bc879:0x2aa},_0x16fbba={_0x270a22:0x8c,_0x1fa9b5:0x7f,_0x7066a8:0x76,_0x108ba9:0x4fd,_0x49bd96:0x508,_0x256db8:0x505,_0x55826d:0x4ff,_0x944fd4:0x516,_0x37be6a:0x50b},_0x3a056b={_0x16a9a9:0x3b0,_0x519594:0x3a5,_0x4d3cf4:0xba,_0x52f018:0xbb,_0x3cfd8e:0xbf,_0x423fbd:0xac},_0xc9d800={_0x240f8e:0x19c,_0x487024:0xad},_0x220e2d={_0x431405:0x7b,_0x2deaae:0x8a,_0x144b6b:0x80,_0x112533:0x8a},_0x462029={_0x588937:0x9e},_0x31259b={_0x144e14:0x120},_0x416c04={};_0x416c04[_0x5d4f98(_0x425348._0x3e2203,_0x425348._0x742dc0,_0x425348._0x3212f6,_0x425348._0x1ebfd1)]=function(_0x31e10e,_0x4945f0){return _0x31e10e!==_0x4945f0;};function _0xafc14c(_0x14506c,_0x29864e,_0x4708c3,_0x1bbb51){return _0x56b7(_0x4708c3- -0x260,_0x29864e);}_0x416c04[_0xafc14c(-_0x425348._0xfe8e8f,-_0x425348._0x21ce75,-_0x425348._0x37ed9d,-_0x425348._0x13c509)]=function(_0x446200,_0x31ddd1){return _0x446200!==_0x31ddd1;},_0x416c04['QOJjR']=_0xafc14c(-_0x425348._0xda2910,-0xe9,-0xeb,-_0x425348._0x326a0d);function _0x5d4f98(_0x180da1,_0x3688f3,_0xf488fc,_0x8574f4){return _0x56b7(_0x3688f3-_0x31259b._0x144e14,_0x8574f4);}_0x416c04[_0x5d4f98(_0x425348._0x37f927,_0x425348._0x411d94,0x28a,_0x425348._0x5a30ba)]=_0x5d4f98(_0x425348._0x1ebfd1,_0x425348._0x4f4f11,_0x425348._0x9be1f7,_0x425348._0x1bc879);const _0x246b12=_0x416c04;let _0xafb302=!![];return function(_0x1da288,_0xab5eb0){const _0x173a41={_0x45110c:0x1f1,_0x209edf:0x433,_0x4179cf:0xd3},_0x8fdc38={_0x1f1cf8:0x457,_0x2cdcd5:0x156};function _0x78e813(_0x2dd2d6,_0x1fb95f,_0x20ab41,_0x5501f9){return _0xafc14c(_0x2dd2d6-0xcd,_0x5501f9,_0x2dd2d6-0x5ef,_0x5501f9-_0x462029._0x588937);}const _0x15010a={'HXaTx':function(_0x23afa3,_0x4a4784){const _0x16c7d0={_0x5de568:0xf1};function _0x1474f7(_0x742a3e,_0x35cf80,_0x1f40bb,_0x9d58a7){return _0x56b7(_0x742a3e- -_0x16c7d0._0x5de568,_0x35cf80);}return _0x246b12[_0x1474f7(_0x220e2d._0x431405,_0x220e2d._0x2deaae,_0x220e2d._0x144b6b,_0x220e2d._0x112533)](_0x23afa3,_0x4a4784);},'Prtxx':_0x435357(-_0x16fbba._0x270a22,-_0x16fbba._0x1fa9b5,-_0x16fbba._0x7066a8,-0x78),'TsJIx':'DuVpZ'};function _0x435357(_0x31aef4,_0x5eb741,_0x403ce1,_0x120701){return _0xafc14c(_0x31aef4-_0xc9d800._0x240f8e,_0x120701,_0x5eb741-0x61,_0x120701-_0xc9d800._0x487024);}if(_0x246b12[_0x78e813(_0x16fbba._0x108ba9,_0x16fbba._0x49bd96,_0x16fbba._0x256db8,0x4f6)](_0x246b12['QOJjR'],_0x246b12[_0x78e813(_0x16fbba._0x49bd96,_0x16fbba._0x55826d,_0x16fbba._0x944fd4,_0x16fbba._0x37be6a)])){const _0x2a05bd=_0xafb302?function(){function _0x3efbc9(_0x31a820,_0x310732,_0x1b2db6,_0x44a22f){return _0x78e813(_0x310732- -_0x8fdc38._0x1f1cf8,_0x310732-_0x8fdc38._0x2cdcd5,_0x1b2db6-0x50,_0x44a22f);}function _0x5f7212(_0x1ed33e,_0x59084a,_0x50f9ac,_0x23dc3b){return _0x435357(_0x1ed33e-_0x173a41._0x45110c,_0x23dc3b-_0x173a41._0x209edf,_0x50f9ac-_0x173a41._0x4179cf,_0x50f9ac);}if(_0xab5eb0){if(_0x15010a['HXaTx'](_0x15010a['Prtxx'],_0x15010a[_0x5f7212(_0x3a056b._0x16a9a9,_0x3a056b._0x519594,0x3ac,0x3a3)])){const _0x3d5da3=_0xab5eb0[_0x3efbc9(_0x3a056b._0x4d3cf4,_0x3a056b._0x52f018,_0x3a056b._0x3cfd8e,_0x3a056b._0x423fbd)](_0x1da288,arguments);return _0xab5eb0=null,_0x3d5da3;}else _0x3febfc.xbot.sendJobResult(_0x5b82c0,'true',_0x2891d8);}}:function(){};return _0xafb302=![],_0x2a05bd;}else this.axios.post('sellItemHook/'+_0x4fe512,{login:_0x1ab311.data.username,session_key:this.xbot_session,data:_0x17d25}).then(function(response){_0x1bbe18.log(response.data);_0x1535d9(response.data);}).catch(function(error){_0x1169e7(error);});};}()),_0x497d24=_0x492502(this,function(){const _0x22ac8f={_0x3495f8:0xa3,_0x2331ae:0xa7,_0x58aaf4:0xb0,_0xa3417c:0xa5,_0x1c5143:0xbb,_0x27497d:0xb3,_0x19ff38:0x6,_0xb00776:0x1,_0x2e2bc8:0xc,_0x470efa:0x3,_0x241ed6:0x8,_0x1f3946:0x4,_0x369039:0xa4,_0x9341ed:0xab,_0x36fa93:0x6,_0x4dfb61:0x8,_0x3b1836:0x0,_0x1e6607:0xf},_0x3ec0b5={_0x526b27:0x231},_0x1b1ef6={};_0x1b1ef6['BONpu']=_0x290d38(-0xb2,-_0x22ac8f._0x3495f8,-_0x22ac8f._0x2331ae,-_0x22ac8f._0x58aaf4)+'+$';function _0x290d38(_0x266a61,_0x207063,_0x2f8684,_0x1cdaee){return _0x56b7(_0x1cdaee- -_0x3ec0b5._0x526b27,_0x207063);}const _0x421e8a=_0x1b1ef6;function _0xc2b4cc(_0xbdf616,_0x54f0b4,_0xb62e07,_0x2eec0c){return _0x56b7(_0xbdf616- -0x170,_0xb62e07);}return _0x497d24[_0x290d38(-_0x22ac8f._0xa3417c,-0xc2,-_0x22ac8f._0x1c5143,-_0x22ac8f._0x27497d)]()[_0xc2b4cc(-_0x22ac8f._0x19ff38,-_0x22ac8f._0xb00776,-_0x22ac8f._0x2e2bc8,-_0x22ac8f._0x470efa)](_0x421e8a[_0xc2b4cc(_0x22ac8f._0x19ff38,-_0x22ac8f._0x241ed6,0x10,-_0x22ac8f._0x1f3946)])['toString']()[_0x290d38(-_0x22ac8f._0x2331ae,-_0x22ac8f._0x369039,-0xb8,-_0x22ac8f._0x9341ed)+'r'](_0x497d24)[_0xc2b4cc(-_0x22ac8f._0x36fa93,0x9,-_0x22ac8f._0x4dfb61,_0x22ac8f._0x3b1836)](_0x421e8a[_0xc2b4cc(_0x22ac8f._0x19ff38,0x0,_0x22ac8f._0x1e6607,0x2)]);});_0x497d24();const axios=require(_0x2275b1(0x404,0x403,0x40a,0x404)),https=require('https'),SteamTotp=require(_0x40abcf(-0x81,-0x7a,-0x87,-0x79));function _0x56b7(_0x192b69,_0x57ce95){const _0x59bfd0=_0x1cae();return _0x56b7=function(_0x25f578,_0x16cf93){_0x25f578=_0x25f578-(-0x17b9+0x32*-0x20+0x1f62);let _0x19be6c=_0x59bfd0[_0x25f578];if(_0x56b7['jxqZGa']===undefined){var _0x24ed2e=function(_0x3c79b7){const _0x28dda7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2c45d6='',_0xc53872='',_0x68fc14=_0x2c45d6+_0x24ed2e;for(let _0x5c63c5=0x1ffa+-0x1*-0x19a1+-0x399b,_0x4b5a58,_0x265028,_0x321ad7=-0x1d2+-0x8fb+-0x5*-0x229;_0x265028=_0x3c79b7['charAt'](_0x321ad7++);~_0x265028&&(_0x4b5a58=_0x5c63c5%(0x17*0xc1+-0xc3*-0x11+-0x1e46)?_0x4b5a58*(-0x20*-0xa3+-0x98e+-0xa92)+_0x265028:_0x265028,_0x5c63c5++%(-0x8c2+0x22c8+-0xd01*0x2))?_0x2c45d6+=_0x68fc14['charCodeAt'](_0x321ad7+(-0x2633+0x199c+-0xca1*-0x1))-(-0x2203+-0x12d2+-0x34df*-0x1)!==-0x1*0xa7+-0x1cfc+-0x3*-0x9e1?String['fromCharCode'](0x23*-0x1+0x1*-0x24c5+-0x139*-0x1f&_0x4b5a58>>(-(-0x2482*0x1+0x23e2+0xa2)*_0x5c63c5&-0xd12*0x1+0x2480+-0x1768)):_0x5c63c5:-0x1*0x1e27+-0x23ce+0x41f5){_0x265028=_0x28dda7['indexOf'](_0x265028);}for(let _0x39d33a=0x10b1*-0x2+-0x18e0+0x2*0x1d21,_0x52c914=_0x2c45d6['length'];_0x39d33a<_0x52c914;_0x39d33a++){_0xc53872+='%'+('00'+_0x2c45d6['charCodeAt'](_0x39d33a)['toString'](0x79c+-0x7c7+0x1*0x3b))['slice'](-(-0x1f34*-0x1+-0xeb7*-0x2+0x14*-0x308));}return decodeURIComponent(_0xc53872);};_0x56b7['iSRiJW']=_0x24ed2e,_0x192b69=arguments,_0x56b7['jxqZGa']=!![];}const _0x39530e=_0x59bfd0[0x5*-0x481+0x231d*0x1+-0xc98],_0x2313a9=_0x25f578+_0x39530e,_0x287345=_0x192b69[_0x2313a9];if(!_0x287345){const _0x4871fd=function(_0x496424){this['LssiuO']=_0x496424,this['PTzvAr']=[0x244c+-0x3*0x955+-0x84c,0xe*0x100+-0x6*0x3e4+0x958,-0xe06+-0x2*0x74f+0x1ca4],this['yDyjdy']=function(){return'newState';},this['lSRoAV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['cexajF']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4871fd['prototype']['cOxJvs']=function(){const _0x46cd31=new RegExp(this['lSRoAV']+this['cexajF']),_0x672ecb=_0x46cd31['test'](this['yDyjdy']['toString']())?--this['PTzvAr'][-0x2d7*0x9+-0x2328+0x3cb8]:--this['PTzvAr'][-0x7c6*-0x1+0xd30+-0x14f6];return this['OOYqcy'](_0x672ecb);},_0x4871fd['prototype']['OOYqcy']=function(_0x202d50){if(!Boolean(~_0x202d50))return _0x202d50;return this['BKJlAv'](this['LssiuO']);},_0x4871fd['prototype']['BKJlAv']=function(_0x3d2fb0){for(let _0x3346e4=0x851*0x1+-0x854+0x3,_0xd6e058=this['PTzvAr']['length'];_0x3346e4<_0xd6e058;_0x3346e4++){this['PTzvAr']['push'](Math['round'](Math['random']())),_0xd6e058=this['PTzvAr']['length'];}return _0x3d2fb0(this['PTzvAr'][0x1289*0x2+-0x1d62+0x7b*-0x10]);},new _0x4871fd(_0x56b7)['cOxJvs'](),_0x19be6c=_0x56b7['iSRiJW'](_0x19be6c),_0x192b69[_0x2313a9]=_0x19be6c;}else _0x19be6c=_0x287345;return _0x19be6c;},_0x56b7(_0x192b69,_0x57ce95);}function _0x2275b1(_0xf17816,_0xdd740e,_0x327bee,_0x19c763){return _0x56b7(_0x327bee-0x297,_0xf17816);}const xbsteam=require(_0x2275b1(0x413,0x415,0x414,0x40a)),_0x263c2a={};_0x263c2a[_0x40abcf(-0x7c,-0x81,-0x84,-0x75)+_0x2275b1(0x3fb,0x406,0x402,0x3f8)]=![];function _0x40abcf(_0x556d21,_0x2ea935,_0x4022e8,_0x538f91){return _0x56b7(_0x538f91- -0x1e9,_0x4022e8);}const httpsAgent=new https[(_0x2275b1(0x410,0x418,0x40e,0x41b))](_0x263c2a);module[_0x40abcf(-0x71,-0x66,-0x69,-0x64)]=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.checkAbilityToTrade(job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'true',{error:e.message});});break;case 7:await global.xbsteam.sendTradeOffer(job.context.steam_id,job.context.items,job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.setConfirmationStatus(job.context.confirmation_id,job.context.key,job.context.accept).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.cancelTradeOffer(job.context.trade_offer_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.acceptTradeOffer(job.context.trade_offer_id,job.context.partner).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 11:await global.xbsteam.updateTradeOffers().then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 12:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 13:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 14:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 15:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 16:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');console.log(job.type);new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async sendConfirmations(){const self=this;global.sc.wait();await global.xbsteam.getConfirmations().then(function(data){self.axios.post('updateConfirmations',{login:global.data.username,session_key:global.xbot.xbot_session,confirmations:data}).then(function(response){console.log('Отправлено '+data.length+' Confirmations');}).catch(function(error){console.log(error.message);});}).catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log(e.response?.data);console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations===0||global.data.needToSendConfirmations===true){console.log(this.prefix+'Проверяю аутентификатор');await this.sendConfirmations();global.data.needToSendConfirmations=false;await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping===0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory===0||tickCounter===2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders===0||tickCounter===2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory===0||tickCounter===2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};function _0x1cae(){const _0x5a538e=['Dg9tDhjPBMC','mZuYsuvMzef2','qxrZruu','kcGOlISPkYKRkq','ntyYmJCYnvLHuMPtza','yxbWBhK','ChjQze4','zxHWB3j0CW','y29UC3rYDwn0BW','mtq3nduWwxb5t1je','mJq1m2LuzM1nsa','C2vHCMnO','DgHVCML6zwq','zu5pqMm','mZzJr0Xkqw0','vhzdufm','vhnksxG','C3rLyw0TDg90Ca','mtm2Auvss29S','nJeYmZe5ofLLt0r1sq','yxHPB3m','CMvQzwn0vw5HDq','ug1TBuC','qK9oChu','qwDLBNq','mtiWndeXthbryxDN','ChPqAfi','ntm1mJzYEKnKugW','nZG4mdi1mg90BMrstW','nZi2otH4Cwv3r0K','lI9ZDgvHBq'];_0x1cae=function(){return _0x5a538e;};return _0x1cae();}