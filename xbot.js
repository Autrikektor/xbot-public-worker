(function(_0x21a18e,_0x3cbf53){const _0x322347={_0x2f6948:0xb1,_0x155ff4:0xab,_0x14cf84:0xb9,_0x56e995:0xb3,_0x4e73fe:0xbb,_0xef942e:0xb5,_0x2dfd34:0x7,_0x490f79:0x9,_0x5471e7:0x9,_0x4c47e2:0xb6,_0xa61580:0xb2,_0x44bf87:0x5,_0xf23944:0xd,_0x34b8a4:0xc,_0x1da87b:0xb,_0x48396b:0xa5,_0x3d2975:0x94,_0xcea6cd:0xa0,_0x4fab44:0x9c,_0xd402f9:0x1,_0x288c0d:0x2,_0x30e607:0x2,_0x1d9c6b:0x1,_0x36b958:0xac,_0x1be9d3:0xb0,_0x441384:0xae,_0x59f659:0xa7,_0x55b1cf:0x9c,_0x2969a5:0xe,_0x3af125:0xa,_0x160263:0xf},_0x3eeef6={_0x4d55ca:0xd3},_0x8608e8={_0x4be988:0x2e},_0x3708bf=_0x21a18e();function _0x5d9690(_0x4b8cd9,_0x1e70ce,_0x19829a,_0x36a86d){return _0x1ad1(_0x19829a- -_0x8608e8._0x4be988,_0x1e70ce);}function _0xe08dec(_0x3ece95,_0x272b0e,_0x352606,_0x429dad){return _0x1ad1(_0x429dad- -_0x3eeef6._0x4d55ca,_0x3ece95);}while(!![]){try{const _0x481b83=parseInt(_0x5d9690(_0x322347._0x2f6948,_0x322347._0x155ff4,0xaf,_0x322347._0x14cf84))/(-0x22c5+-0x1e7c+0x4142)*(-parseInt(_0x5d9690(_0x322347._0x56e995,_0x322347._0x4e73fe,_0x322347._0xef942e,0xbd))/(0x1*0x1aeb+-0x26bd+-0x5ea*-0x2))+-parseInt(_0xe08dec(_0x322347._0x2dfd34,-_0x322347._0x490f79,_0x322347._0x5471e7,-0x1))/(0xbcd+-0x1*0x12a3+0x6d9)+-parseInt(_0x5d9690(_0x322347._0x4c47e2,0xae,_0x322347._0xa61580,0xb3))/(0x13a5+-0x1ff8+0xc57)+parseInt(_0xe08dec(_0x322347._0x44bf87,0xa,_0x322347._0xf23944,_0x322347._0x44bf87))/(0x2517+-0x6*-0xb2+0x2*-0x149f)*(parseInt(_0xe08dec(-_0x322347._0x34b8a4,-_0x322347._0x1da87b,_0x322347._0x44bf87,0x0))/(-0x2370+-0xeab+0x3221))+-parseInt(_0x5d9690(_0x322347._0x48396b,_0x322347._0x3d2975,_0x322347._0xcea6cd,_0x322347._0x4fab44))/(-0xcf6+-0x960+0x165d)*(-parseInt(_0xe08dec(-_0x322347._0xd402f9,_0x322347._0x288c0d,-_0x322347._0x30e607,_0x322347._0x1d9c6b))/(0x1*-0x2527+0x1*0x51d+0x2012*0x1))+parseInt(_0x5d9690(0xb7,_0x322347._0x36b958,_0x322347._0x1be9d3,_0x322347._0x441384))/(0x4c1*-0x8+-0x22c8+0x1*0x48d9)+-parseInt(_0x5d9690(_0x322347._0x59f659,0x92,0x9e,_0x322347._0x55b1cf))/(-0x26c3*-0x1+-0x2db*0x2+-0x2103)*(parseInt(_0xe08dec(0xa,_0x322347._0x2969a5,_0x322347._0x3af125,_0x322347._0x160263))/(0x355+-0x1116+0xdcc));if(_0x481b83===_0x3cbf53)break;else _0x3708bf['push'](_0x3708bf['shift']());}catch(_0x47ca20){_0x3708bf['push'](_0x3708bf['shift']());}}}(_0x59b0,-0x8f528+0x65a4c+0x1*0x90a63));const _0xf7a0f4=(function(){const _0x1183af={_0x266278:0x126,_0x924203:0x120,_0x35c741:0x12c,_0x4099d8:0x130};let _0x57ea71=!![];return function(_0x5a4bf9,_0x265d7f){const _0x3c9271={_0x460040:0x4c},_0x184701=_0x57ea71?function(){function _0x4d57d7(_0x1848f7,_0x2240ba,_0x2c0209,_0x3cd63f){return _0x1ad1(_0x1848f7-_0x3c9271._0x460040,_0x2240ba);}if(_0x265d7f){const _0xb163b8=_0x265d7f[_0x4d57d7(_0x1183af._0x266278,_0x1183af._0x924203,_0x1183af._0x35c741,_0x1183af._0x4099d8)](_0x5a4bf9,arguments);return _0x265d7f=null,_0xb163b8;}}:function(){};return _0x57ea71=![],_0x184701;};}()),_0x1808b3=_0xf7a0f4(this,function(){const _0xd8c716={_0x23f01f:0x442,_0x27e581:0x441,_0x130538:0x52,_0x2c7cb8:0x4a,_0x43f5a6:0x56,_0x52270f:0x44e,_0x4ecf64:0x4e,_0x163eb2:0x5d,_0x42f108:0x56,_0x2fc64b:0x4c,_0x302802:0x62,_0x3b10b3:0x43e,_0x5579eb:0x43a,_0x12a2dd:0x434},_0x11f470={_0x21c6c1:0x36d},_0x5f5bf5={_0x3c34f9:0x126};function _0x4167cc(_0x157b3f,_0x59801d,_0x18ec59,_0x1bd17f){return _0x1ad1(_0x1bd17f- -_0x5f5bf5._0x3c34f9,_0x59801d);}const _0x3ef1bc={};_0x3ef1bc[_0x3733f6(_0xd8c716._0x23f01f,_0xd8c716._0x23f01f,0x442,_0xd8c716._0x27e581)]='(((.+)+)+)'+'+$';const _0x5885cb=_0x3ef1bc;function _0x3733f6(_0x56f39c,_0x4e0f15,_0x336a7c,_0x5265c7){return _0x1ad1(_0x56f39c-_0x11f470._0x21c6c1,_0x5265c7);}return _0x1808b3[_0x4167cc(-0x56,-_0xd8c716._0x130538,-_0xd8c716._0x2c7cb8,-_0xd8c716._0x43f5a6)]()['search'](_0x5885cb[_0x3733f6(0x442,_0xd8c716._0x27e581,0x436,_0xd8c716._0x52270f)])[_0x4167cc(-_0xd8c716._0x4ecf64,-_0xd8c716._0x163eb2,-_0xd8c716._0x2c7cb8,-_0xd8c716._0x42f108)]()[_0x4167cc(-_0xd8c716._0x2fc64b,-0x5d,-_0xd8c716._0x302802,-0x57)+'r'](_0x1808b3)[_0x3733f6(_0xd8c716._0x3b10b3,_0xd8c716._0x23f01f,_0xd8c716._0x5579eb,_0xd8c716._0x12a2dd)](_0x5885cb['jGmzF']);});function _0x59b0(){const _0x4b734a=['AKDTEKy','qwDLBNq','C3rLyw0TDg90Ca','ndbQAwfbC2i','CMvQzwn0vw5HDq','yxbWBhK','Ahr0Chm','zxHWB3j0CW','mJe0n1HdANHACa','nJa4otqWmeXMu0XyCW','yxHPB3m','mteXotyWog9WwKzwqG','DgHVCML6zwq','mJq1nZm2n2rAtfbyvW','otHnsMvJzLq','mtbuy2HIBva','lI9ZDgvHBq','mta5mJy0ngfjyKv5rW','y29UC3rYDwn0BW','Dg9tDhjPBMC','C2vHCMnO','mJmXnJi0owjrBer0wG','nJeWmtC2sMPwvLfj','mtzhtM1kwfq'];_0x59b0=function(){return _0x4b734a;};return _0x59b0();}_0x1808b3();function _0xb0cc00(_0x2ba590,_0x3382d3,_0x532c33,_0x5ec179){return _0x1ad1(_0x5ec179-0x119,_0x2ba590);}const axios=require(_0x19537e(-0x251,-0x245,-0x23c,-0x24d)),https=require(_0x19537e(-0x250,-0x249,-0x255,-0x240)),SteamTotp=require(_0x19537e(-0x252,-0x24d,-0x250,-0x254)),xbsteam=require(_0x19537e(-0x261,-0x257,-0x24b,-0x24f));function _0x19537e(_0x47a6c9,_0x1afd38,_0x44b664,_0x3be890){const _0x254b4c={_0x253086:0x324};return _0x1ad1(_0x1afd38- -_0x254b4c._0x253086,_0x47a6c9);}const _0x117969={};function _0x1ad1(_0x4abd82,_0x2bee17){const _0x150443=_0x59b0();return _0x1ad1=function(_0x5e73c4,_0x22b82c){_0x5e73c4=_0x5e73c4-(-0x7*-0xe5+0x2244+-0x7*0x5ad);let _0x2b2376=_0x150443[_0x5e73c4];if(_0x1ad1['sxaILa']===undefined){var _0x131f7c=function(_0x25e800){const _0x8d99c5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x10702d='',_0x56a30f='',_0x40db69=_0x10702d+_0x131f7c;for(let _0x32f2d6=0x508*-0x4+0x26f*0x7+0x317,_0x474bef,_0x10bc8c,_0x2a4681=-0x232*-0x2+0x91c+-0x180*0x9;_0x10bc8c=_0x25e800['charAt'](_0x2a4681++);~_0x10bc8c&&(_0x474bef=_0x32f2d6%(0x67a*-0x1+0x1ff*0x7+0x17f*-0x5)?_0x474bef*(-0x100*0x25+0x1*-0x9ea+0x1795*0x2)+_0x10bc8c:_0x10bc8c,_0x32f2d6++%(-0x1*0x1e4f+-0x2*0x107+0x133*0x1b))?_0x10702d+=_0x40db69['charCodeAt'](_0x2a4681+(-0x2ab*-0x5+-0x8*0x6c+-0x9ed))-(-0x728+0x13*-0x53+0xd5b)!==0x1c8c+0x2062+-0x1*0x3cee?String['fromCharCode'](0x2*-0x638+-0x330+0x1*0x109f&_0x474bef>>(-(-0x1424+-0x2b*0x85+0x2a7d)*_0x32f2d6&-0x889+0xea7+0x6*-0x104)):_0x32f2d6:0x19f1+0x67*0x7+-0x1cc2){_0x10bc8c=_0x8d99c5['indexOf'](_0x10bc8c);}for(let _0x36519e=0x8dc+0x1312+-0x1*0x1bee,_0x17874b=_0x10702d['length'];_0x36519e<_0x17874b;_0x36519e++){_0x56a30f+='%'+('00'+_0x10702d['charCodeAt'](_0x36519e)['toString'](-0x4d1+-0x1f78+0x2459))['slice'](-(-0x1478*0x1+0x2192+-0xd18));}return decodeURIComponent(_0x56a30f);};_0x1ad1['smysvp']=_0x131f7c,_0x4abd82=arguments,_0x1ad1['sxaILa']=!![];}const _0x4db582=_0x150443[-0x1*0x8+0x1*-0x5e7+0x5ef],_0x267332=_0x5e73c4+_0x4db582,_0xebd9c5=_0x4abd82[_0x267332];if(!_0xebd9c5){const _0x2f6941=function(_0x410c76){this['YPbBYZ']=_0x410c76,this['InSDlI']=[0x1f04+0x97b+-0x143f*0x2,-0x13d9+0x10ee+0x53*0x9,-0x32f+-0x2583+0x28b2*0x1],this['BedHqd']=function(){return'newState';},this['vvpRbd']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['nLcsfK']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2f6941['prototype']['mnORcw']=function(){const _0x158e18=new RegExp(this['vvpRbd']+this['nLcsfK']),_0x2e58cc=_0x158e18['test'](this['BedHqd']['toString']())?--this['InSDlI'][0xe36*0x2+0xfd3*0x1+0x652*-0x7]:--this['InSDlI'][-0x3b1+0x46f*0x6+-0x16e9];return this['XHPESg'](_0x2e58cc);},_0x2f6941['prototype']['XHPESg']=function(_0xc212fe){if(!Boolean(~_0xc212fe))return _0xc212fe;return this['vRdTAM'](this['YPbBYZ']);},_0x2f6941['prototype']['vRdTAM']=function(_0x1237e1){for(let _0x59fee0=-0x3*0x10+0x125b+-0x1*0x122b,_0x4b7de7=this['InSDlI']['length'];_0x59fee0<_0x4b7de7;_0x59fee0++){this['InSDlI']['push'](Math['round'](Math['random']())),_0x4b7de7=this['InSDlI']['length'];}return _0x1237e1(this['InSDlI'][-0x2192+0x25*0xd2+-0x4*-0xce]);},new _0x2f6941(_0x1ad1)['mnORcw'](),_0x2b2376=_0x1ad1['smysvp'](_0x2b2376),_0x4abd82[_0x267332]=_0x2b2376;}else _0x2b2376=_0xebd9c5;return _0x2b2376;},_0x1ad1(_0x4abd82,_0x2bee17);}_0x117969[_0xb0cc00(0x1f0,0x1ed,0x1ea,0x1f2)+_0xb0cc00(0x1f0,0x1fe,0x206,0x1fa)]=![];const httpsAgent=new https[(_0x19537e(-0x249,-0x24e,-0x257,-0x259))](_0x117969);module[_0x19537e(-0x242,-0x248,-0x23c,-0x23e)]=class xbot{xbot_apiurl=global.xbot_apiurl;prefix='[xbot.gg] ';axiosconfig={httpsAgent:httpsAgent,withCredentials:true,baseURL:this.xbot_apiurl,timeout:10000,headers:{'Authorization':`Bearer ${global.data.apiKey}`,'Accept':'application/json','X-Requested-With':'XMLHttpRequest','X-Bot-Version':global.data.version}};axios=null;xbot_session=null;axios=axios.create(this.axiosconfig);auth(){return new Promise((resolve,reject)=>{this.axios.post('auth',{login:global.data.username}).then(function(response){global.xbot.xbot_session=response.data.session_key;if(response.data.status==0){global.xbot.xbot_loggedIn=true;}resolve(response.data.session_key);console.log(global.xbot.prefix+'Успешно авторизован');}).catch(function(error){reject(error);});});}xbot_loggedIn=false;lastsentauthkey='';async ping(authkey){return await new Promise(async(resolve,reject)=>{this.lastsentauthkey=authkey;this.axios.post('ping',{login:global.data.username,session_key:global.xbot.xbot_session,authkey:authkey}).then(function(response){resolve(response);}).catch(async function(error){global.xbot.xbot_loggedIn=false;console.error('Error:',error);reject(error);});});}invcontexts=[];updateOrdersAndListings(data){return new Promise((resolve,reject)=>{this.axios.post('updateOrdersAndListings',{login:global.data.username,session_key:global.xbot.xbot_session,listings:data.listings,listings_on_hold:data.listings_on_hold,listings_to_confirm:data.listings_to_confirm,buy_orders:data.buy_orders}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}updateAccountData(user,contexts,wallet){return new Promise((resolve,reject)=>{user._community=null;user.session_key=null;if(contexts!==undefined){this.invcontexts=Object.keys(contexts);}this.axios.post('updateAccountData',{login:global.data.username,session_key:this.xbot_session,account:user,inventoryContexts:contexts,wallet:wallet}).then(function(response){resolve(response);}).catch(function(error){reject(error);console.error('Error:',error.response.data);});});}updateInventory(appid,inventory){return new Promise((resolve,reject)=>{this.axios.post('updateInventory',{login:global.data.username,session_key:this.xbot_session,inventory:inventory,appid:appid}).catch(function(error){reject(error);console.error('Error:',error.response.data);}).then(function(data){resolve(data);});});}userdata=null;getJobs(){return new Promise((resolve,reject)=>{this.axios.post('getJobs',{login:global.data.username,session_key:this.xbot_session}).then(function(response){resolve(response.data);}).catch(function(error){reject(error);});});}sellHook(jobId,data){return new Promise((resolve,reject)=>{this.axios.post('sellItemHook/'+jobId,{login:global.data.username,session_key:this.xbot_session,data:data}).then(function(response){console.log(response.data);resolve(response.data);}).catch(function(error){reject(error);});});}sendJobResult(job,status,result){try{console.log('['+status+'] sending job result '+job.id);this.axios.post('jobResult/'+job.id,{login:global.data.username,session_key:this.xbot_session,jobId:job.id,status:status,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log('Произошла ошибка при отправке статуса задания '+job.id);}}customLog(code,message){try{this.axios.post('customLog',{login:global.data.username,session_key:this.xbot_session,code:code,message:message}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}catch(ex){console.log(ex);console.log('Произошла ошибка при отправке лога ');}}history(result){this.axios.post('updateLatestHistory',{login:global.data.username,session_key:this.xbot_session,result:result}).then(function(response){console.log(response.data);}).catch(function(e){console.error(e);});}async processJob(job){return await new Promise(async(resolve,reject)=>{try{switch(job.type){case 1:await global.xbsteam.getItemEconomics(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).catch(function(ex){console.log(ex);}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 2:const j=await new Promise(async(resolve2,reject2)=>{resolve2(await global.sc.getUserInventory(global.xbot.userdata.steamID,job.context.appid,job.context.contextid,false,function(e,inv,currency){if(e){reject2(e);return;}resolve2(inv);}));}).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 3:await global.xbsteam.getItemPriceHistory(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',{priceHistory:r});}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 4:await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 5:await global.xbsteam.getItemMarketNameId(job.context.appid,job.context.market_hash_name).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 6:await global.xbsteam.checkAbilityToTrade(job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'true',{error:e.message});});break;case 7:await global.xbsteam.sendTradeOffer(job.context.steam_id,job.context.items,job.context.partner,job.context.token).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 8:await global.xbsteam.setConfirmationStatus(job.context.confirmation_id,job.context.key,job.context.accept).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 9:await global.xbsteam.cancelTradeOffer(job.context.trade_offer_id).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 10:await global.xbsteam.acceptTradeOffer(job.context.trade_offer_id,job.context.partner).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 11:await global.xbsteam.updateTradeOffers().then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 12:if(job.context.analyze===true){const data=await global.xbsteam.getItemOrderBookWM(job.context.country,job.context.currency,job.context.appid,job.context.market_hash_name,job.context.market_name_id);var hook=this.sellHook(job.id,data);if(hook.price!==undefined&&hook.price>0){job.context.price=hook.price;}}await global.xbsteam.sellItem(job.context.appid,job.context.contextid,job.context.assetid,job.context.amount,job.context.price).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 13:await global.xbsteam.cancelSellListing(job.context.listingId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 14:await global.xbsteam.createBuyOrder(job.context.currency,job.context.appid,job.context.market_hash_name,job.context.price_total,job.context.quantity,job.context.billing_state,job.context.save_my_address).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;case 15:await global.xbsteam.cancelBuyOrder(job.context.orderId).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){global.xbot.sendJobResult(job,'false',e);});break;case 16:await global.xbsteam.getMarketHistory(job.context.offset,job.context.limit).then(function(r){global.xbot.sendJobResult(job,'true',r);}).catch(function(e){console.log(e);global.xbot.sendJobResult(job,'false',e);});break;default:console.log('unknown job type');console.log(job.type);new Error('Unknown job type');break;}}catch(ex){this.sendJobResult(job,false,null);console.log(ex);global.sc.wait();console.log('Произошла ошибка при обработке задания #'+job.id);}resolve();});}async sendConfirmations(){const self=this;global.sc.wait();await global.xbsteam.getConfirmations().then(function(data){self.axios.post('updateConfirmations',{login:global.data.username,session_key:global.xbot.xbot_session,confirmations:data}).then(function(response){console.log('Отправлено '+data.length+' Confirmations');}).catch(function(error){console.log(error.message);});}).catch(function(e){console.log('Произошла ошибка при проверке аунтентификатора');});}async processInventory(){return await new Promise(async(resolve,reject)=>{console.log(this.prefix+'Обновляю инвентарь');await global.sc.wait();const arr=await global.xbsteam.getInventoryContexts(global.sc.steamID);const data=arr[0];const wallet=arr[1];global.xbot.updateAccountData(global.xbot.userdata,data,wallet);const invcontexts=Object.keys(data);for(const invc of invcontexts){await new Promise(async(resolve2,reject2)=>{await global.sc.wait();global.sc.getUserInventory(global.xbot.userdata.steamID,invc,2,false,function(e,inv,currency){if(e){reject2(e);return;}global.xbot.updateInventory(invc,inv);resolve2(data);});}).catch(function(e){console.log(e);}).then(function(data){console.log(global.xbot.prefix+invc+' updated');});}resolve();});}loop(tickCounter){return new Promise(async(resolve,reject)=>{try{if(!this.xbot_loggedIn){console.log(this.prefix+'Попытка авторизации');await this.auth().catch(await function(e){return new Promise(async resolve2=>{console.log(e.response?.data);console.log('Ошибка авторизации. Проверьте API ключ');await new Promise(resolve2=>setTimeout(resolve,global.data.tickDelay*2));resolve2();});});if(this.xbot_loggedIn){console.log(this.prefix+'Обновляю данные пользователя');await global.sc.wait();await global.sc.getSteamUser(sc.steamID,(err,user)=>{if(err){console.error('steam: Ошибка при получении информации о пользователе:');this.xbot_loggedIn=false;}else{user.steamID64=user.steamID.getSteamID64();global.xbot.userdata=user;}});}}if(this.xbot_loggedIn&&global.xbot.userdata!==null){if(tickCounter%global.data.ticks.checkConfirmations===0||global.data.needToSendConfirmations===true){console.log(this.prefix+'Проверяю аутентификатор');await this.sendConfirmations();global.data.needToSendConfirmations=false;await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}let authkey=SteamTotp.getAuthCode(global.data.sharedSecret);if(tickCounter%global.data.ticks.ping===0||this.lastsentauthkey!==authkey){await this.ping(authkey);}if(tickCounter%global.data.ticks.sendInventory===0||tickCounter===2){await this.processInventory();}if(tickCounter%global.data.ticks.sendOrders===0||tickCounter===2){console.log(this.prefix+'Проверяю ордера');await global.sc.wait();await global.xbsteam.getOrders().then(function(data){global.xbot.updateOrdersAndListings(data);});await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}if(tickCounter%global.data.ticks.lastHistory===0||tickCounter===2){console.log(this.prefix+'Обновляю историю операций');var a=await global.xbsteam.getMarketHistory(0,100);this.history(a);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}const jobsResponse=await this.getJobs();const jobs=jobsResponse.jobs;console.log(this.prefix+'Получено '+jobs.length+' заданий');for(const job of jobs){await this.processJob(job);}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));}await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*1));resolve();}catch(ex){console.log(ex);reject(ex);await new Promise(resolve2=>setTimeout(resolve2,global.data.tickDelay*25));}});}};