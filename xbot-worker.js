(function(_0x5834af,_0x4764b0){const _0x8ec340={_0x48ce3d:0x2ab,_0x38e219:0x29f,_0x50e709:0x2ad,_0x3f1279:0x293,_0x329c68:0x299,_0x27ac18:0x2a0,_0x92c55a:0x29c,_0xc6250:0x29f,_0x19917b:0x2a1,_0x42530a:0x299,_0x104a51:0x2a4,_0x365999:0x294,_0x50025d:0x109,_0x3a6920:0x100,_0x370c9a:0x107,_0x148a9e:0x2bb,_0x2dd192:0xfb,_0x552253:0xfa,_0x12e434:0x10e,_0x175bbc:0x102,_0x1fb320:0xf9,_0x18a0ee:0xfb,_0x36b1e8:0x105,_0x243525:0x2a3,_0x5d7c6f:0x2a6,_0x4ea547:0x29a,_0x5e8dd8:0x2b0,_0x969e90:0x2ab,_0x1bffa1:0x2a5,_0x38ea8d:0x2b1},_0x328782={_0xeef7f7:0x2f8},_0x41e50d={_0x449223:0xac};function _0x5368a3(_0x72398f,_0x1e8ce0,_0x26d3bd,_0x416526){return _0x3926(_0x26d3bd-_0x41e50d._0x449223,_0x1e8ce0);}const _0x41e057=_0x5834af();function _0x150021(_0x3175d6,_0x1c72bc,_0x210365,_0x567481){return _0x3926(_0x567481- -_0x328782._0xeef7f7,_0x210365);}while(!![]){try{const _0x51fdb9=-parseInt(_0x5368a3(_0x8ec340._0x48ce3d,_0x8ec340._0x38e219,0x2a6,_0x8ec340._0x50e709))/(-0x1652*-0x1+-0xf*-0xdd+-0x7a*0x4a)*(-parseInt(_0x5368a3(_0x8ec340._0x3f1279,0x2a0,_0x8ec340._0x329c68,_0x8ec340._0x27ac18))/(0x221b+0x66*-0x54+-0xa1))+parseInt(_0x5368a3(_0x8ec340._0x92c55a,_0x8ec340._0xc6250,_0x8ec340._0x19917b,_0x8ec340._0x27ac18))/(-0x671*0x1+-0x1*0x7+-0x67b*-0x1)*(-parseInt(_0x5368a3(_0x8ec340._0x42530a,_0x8ec340._0x104a51,0x2a0,_0x8ec340._0x365999))/(0x2b*0x69+0x66*0x2e+-0x23f3))+-parseInt(_0x150021(-_0x8ec340._0x50025d,-_0x8ec340._0x3a6920,-_0x8ec340._0x370c9a,-_0x8ec340._0x50025d))/(-0x457*-0x5+-0x1fa4+0x66*0x19)+parseInt(_0x5368a3(_0x8ec340._0x27ac18,_0x8ec340._0x148a9e,_0x8ec340._0x50e709,0x2a5))/(-0xb49+-0x171d*0x1+-0x89b*-0x4)+-parseInt(_0x150021(-_0x8ec340._0x2dd192,-_0x8ec340._0x552253,-_0x8ec340._0x12e434,-_0x8ec340._0x175bbc))/(0x136b+-0x10e4+-0x140*0x2)*(parseInt(_0x150021(-0x111,-_0x8ec340._0x1fb320,-_0x8ec340._0x18a0ee,-_0x8ec340._0x36b1e8))/(0x1772+0x200e+-0x8e*0x64))+-parseInt(_0x5368a3(_0x8ec340._0x243525,_0x8ec340._0x5d7c6f,_0x8ec340._0x92c55a,_0x8ec340._0x4ea547))/(-0x1ab2+0x1acb+0x2*-0x8)+-parseInt(_0x5368a3(0x2b7,_0x8ec340._0x5e8dd8,_0x8ec340._0x969e90,_0x8ec340._0x1bffa1))/(-0x11af+-0x2ec*-0xa+-0x3*0x3d5)*(-parseInt(_0x5368a3(_0x8ec340._0x38ea8d,_0x8ec340._0x329c68,_0x8ec340._0x243525,0x2b0))/(-0x130+-0x13*0x1cd+0x2372));if(_0x51fdb9===_0x4764b0)break;else _0x41e057['push'](_0x41e057['shift']());}catch(_0x415e1d){_0x41e057['push'](_0x41e057['shift']());}}}(_0x4e50,-0x8510f+0x567ad+0xbd53d));const _0x55237d=(function(){const _0x4abf0b={_0x3e83af:0x11a,_0x4acfff:0x10d,_0x5c38ee:0x111,_0x40dc4e:0x117,_0x2709f3:0x109,_0x39dd06:0x12a,_0x164adf:0x117,_0x111fbf:0x121,_0x4331a7:0x23b,_0x2ee637:0x240,_0x3e2968:0x23f,_0x2e66ef:0x237,_0x220b51:0x244,_0x11aea7:0x248,_0x16626d:0x250,_0x56ccf2:0x246},_0x909b6f={_0x580b4e:0x19d,_0x2f3d1e:0x19b,_0x524884:0x4ff,_0x30d304:0x505,_0x59e4b8:0x50f,_0x746361:0x50f,_0x355f11:0x50f,_0x9c36dc:0x50c,_0x3e522e:0x194,_0x3fdeab:0x197},_0x200c80={_0x41723d:0x18a},_0x3e69db={_0x33e7d4:0x40},_0x5b7e76={_0x2b2e64:0x30d};function _0x3ccd09(_0x4c0729,_0x2ac3ae,_0x163ee9,_0x398ce6){return _0x3926(_0x398ce6- -_0x5b7e76._0x2b2e64,_0x2ac3ae);}const _0x4c57ce={};_0x4c57ce[_0x3ccd09(-0x11e,-_0x4abf0b._0x3e83af,-_0x4abf0b._0x4acfff,-_0x4abf0b._0x5c38ee)]=function(_0x5ef750,_0x3e3cd3){return _0x5ef750!==_0x3e3cd3;};function _0x801deb(_0x1e93d6,_0x4c760b,_0xf2f5d3,_0x4f364f){return _0x3926(_0x1e93d6-_0x3e69db._0x33e7d4,_0xf2f5d3);}_0x4c57ce[_0x3ccd09(-_0x4abf0b._0x40dc4e,-0x11e,-_0x4abf0b._0x2709f3,-0x114)]=_0x3ccd09(-_0x4abf0b._0x39dd06,-0x117,-_0x4abf0b._0x164adf,-_0x4abf0b._0x111fbf),_0x4c57ce[_0x801deb(_0x4abf0b._0x4331a7,_0x4abf0b._0x2ee637,_0x4abf0b._0x3e2968,_0x4abf0b._0x2e66ef)]=function(_0x2304d9,_0x47a74d){return _0x2304d9!==_0x47a74d;},_0x4c57ce['WXCwv']=_0x801deb(_0x4abf0b._0x220b51,_0x4abf0b._0x11aea7,_0x4abf0b._0x16626d,_0x4abf0b._0x56ccf2);const _0x4a3521=_0x4c57ce;let _0x95b829=!![];return function(_0x2df64c,_0x1ec831){const _0x22b615={_0x49abcc:0x1e3,_0x2220d5:0x1dd,_0x28429e:0x1e9,_0xc6cd8c:0x1e7},_0x1e12f6={_0x3dfb0d:0x11a,_0xf3d84:0x114,_0x30f693:0x327},_0xa76756={_0x485601:0x99},_0x3ceb4e={_0x594485:0x3d6,_0x38af46:0x25},_0x2c6ae3={'KPleU':function(_0x334dd2,_0x4be374){return _0x4a3521['KxJer'](_0x334dd2,_0x4be374);},'HPWum':_0x4a3521[_0x3f54b3(-_0x909b6f._0x580b4e,-_0x909b6f._0x2f3d1e,-0x1a4,-_0x909b6f._0x2f3d1e)]};function _0x3f54b3(_0x1b5df9,_0x13ec38,_0x3d8247,_0x5d5546){return _0x801deb(_0x1b5df9- -_0x3ceb4e._0x594485,_0x13ec38-_0x3ceb4e._0x38af46,_0x13ec38,_0x5d5546-0x1a6);}function _0x5903fd(_0x3eb8e7,_0x34fc88,_0x18bcd1,_0x3cb201){return _0x801deb(_0x3cb201-0x2ca,_0x34fc88-0x170,_0x18bcd1,_0x3cb201-_0x200c80._0x41723d);}if(_0x4a3521[_0x5903fd(0x50c,0x502,_0x909b6f._0x524884,_0x909b6f._0x30d304)](_0x4a3521[_0x5903fd(_0x909b6f._0x59e4b8,_0x909b6f._0x746361,_0x909b6f._0x355f11,_0x909b6f._0x9c36dc)],_0x4a3521[_0x3f54b3(-_0x909b6f._0x3e522e,-_0x909b6f._0x3fdeab,-0x1a0,-0x1a0)]))_0x45d3b5.env['NODE_TLS_REJECT_UNAUTHORIZED']=0,_0x51619a.xbot_apiurl=_0x3cd0ed.env.XBOT_URL;else{const _0x5dea07=_0x95b829?function(){function _0x29aefb(_0x12fb47,_0x5ee8c1,_0x2ef715,_0x5b2e72){return _0x3f54b3(_0x5b2e72-0x411,_0x12fb47,_0x2ef715-_0xa76756._0x485601,_0x5b2e72-0x1d8);}function _0x404a68(_0x12698c,_0x5550df,_0x57c0b9,_0x5a2fd8){return _0x5903fd(_0x12698c-_0x1e12f6._0x3dfb0d,_0x5550df-_0x1e12f6._0xf3d84,_0x5a2fd8,_0x12698c- -_0x1e12f6._0x30f693);}if(_0x2c6ae3['KPleU'](_0x2c6ae3[_0x404a68(_0x22b615._0x49abcc,_0x22b615._0x2220d5,0x1ef,_0x22b615._0x28429e)],_0x2c6ae3['HPWum']))_0x584ec4.xbot=new _0x43dfc2();else{if(_0x1ec831){const _0x2af63c=_0x1ec831[_0x404a68(0x1e6,0x1f2,_0x22b615._0xc6cd8c,0x1e3)](_0x2df64c,arguments);return _0x1ec831=null,_0x2af63c;}}}:function(){};return _0x95b829=![],_0x5dea07;}};}()),_0xd637d6=_0x55237d(this,function(){const _0x20d7c7={_0x8b5c0:0x50,_0x2a2c80:0x50,_0xc1885:0x48,_0x3c5492:0x367,_0x5186b8:0x357,_0x5caf6c:0x360,_0x454a4f:0x55,_0x3a946d:0x56,_0x28b06e:0x54,_0x195705:0x46,_0x541c17:0x42,_0x469905:0x50,_0x59c6f1:0x42,_0x5e84cc:0x49,_0x3fe55b:0x4a,_0x4d4e79:0x36c,_0x459c29:0x366,_0x21ff24:0x360,_0x411c04:0x35f,_0x56ec6c:0x364,_0x3d5456:0x365},_0x4cf864={_0x11ac54:0x1a8},_0xdf1894={_0x4f8694:0x16c},_0x4f99f4={};_0x4f99f4[_0x504e1b(0x48,_0x20d7c7._0x8b5c0,_0x20d7c7._0x2a2c80,_0x20d7c7._0xc1885)]='(((.+)+)+)'+'+$';function _0x153e81(_0x551e7a,_0x20ed45,_0xa4883f,_0x4ff15e){return _0x3926(_0xa4883f-_0xdf1894._0x4f8694,_0x551e7a);}function _0x504e1b(_0x1b70ad,_0x1fe9f6,_0x3980a5,_0x5b18c4){return _0x3926(_0x3980a5- -_0x4cf864._0x11ac54,_0x5b18c4);}const _0x4edde7=_0x4f99f4;return _0xd637d6[_0x153e81(_0x20d7c7._0x3c5492,_0x20d7c7._0x5186b8,0x35d,_0x20d7c7._0x5caf6c)]()[_0x504e1b(0x62,_0x20d7c7._0x454a4f,_0x20d7c7._0x3a946d,_0x20d7c7._0x28b06e)](_0x4edde7[_0x504e1b(_0x20d7c7._0x195705,_0x20d7c7._0x541c17,_0x20d7c7._0x469905,_0x20d7c7._0x59c6f1)])[_0x504e1b(_0x20d7c7._0x5e84cc,_0x20d7c7._0x3a946d,_0x20d7c7._0x5e84cc,_0x20d7c7._0x3fe55b)]()['constructo'+'r'](_0xd637d6)[_0x153e81(0x364,_0x20d7c7._0x4d4e79,0x36a,_0x20d7c7._0x459c29)](_0x4edde7[_0x153e81(_0x20d7c7._0x21ff24,_0x20d7c7._0x411c04,_0x20d7c7._0x56ec6c,_0x20d7c7._0x3d5456)]);});function _0x4e50(){const _0x4e47a8=['ndbTCuL5uxa','mtj2throvwC','nJaWmduXu0PwrNjU','nde2ntiXCeTXALrV','mJK3ntm0odjZvLjJBfe','EwfmthO','D0rKuNy','mvLKrMz1uG','wunHDeO','s3Hkzxi','BML0Eq','C2vHCMnO','mtbdBuXZDK4','sfbxDw0','mZi3nJqYEKnTrKHt','v1HdD3y','yxbWBhK','senAvwu','C3rLyw0TDxnLCG','C3rLyw1ZDg9Yzq','t0LRAwK','ndK3mdm2B0fwsgXn','Bw9Tzw50','ndG4ndaZmfHkqw5kua','ndK0mduZmNvVCuXRDa','Dg9tDhjPBMC','C3rLyw0TDg90Ca'];_0x4e50=function(){return _0x4e47a8;};return _0x4e50();}_0xd637d6();const SteamCommunity=require('steamcommu'+_0x1b8dbf(-0x13,-0x1f,-0x1f,-0x1e)),SteamTotp=require(_0xda0fee(0x410,0x40d,0x405,0x415)),moment=require(_0x1b8dbf(-0x30,-0x3a,-0x2a,-0x2d)),SteamUser=require(_0xda0fee(0x429,0x420,0x42a,0x426)),SteamStore=require(_0x1b8dbf(-0x22,-0x19,-0x1f,-0x15));const xbsteam=require('./steam');const fs=require('fs');const {execSync}=require('child_process');const xbot=require('./xbot');const SteamSession=require('steam-session');const {default:axios}=require('axios');global.sc=new SteamCommunity();function _0x3926(_0x511807,_0x2f34eb){const _0x4dde07=_0x4e50();return _0x3926=function(_0x235081,_0x29815b){_0x235081=_0x235081-(-0x1bc*-0x11+0x11f*-0x17+-0x1c7*0x1);let _0x233fbe=_0x4dde07[_0x235081];if(_0x3926['KqZNmy']===undefined){var _0x381aed=function(_0xc834b2){const _0x5b33e9='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x534db9='',_0x495aac='',_0x4ab5e5=_0x534db9+_0x381aed;for(let _0x54971f=0x1c54+-0x120e+-0xa46,_0x4e5387,_0x3a2cff,_0x15cf8b=-0x2b*-0x34+-0x2*0x9a1+0xa86;_0x3a2cff=_0xc834b2['charAt'](_0x15cf8b++);~_0x3a2cff&&(_0x4e5387=_0x54971f%(-0x11db+-0x4f4+0x1*0x16d3)?_0x4e5387*(0x21d5+-0x1*-0x1aa5+-0x3c3a)+_0x3a2cff:_0x3a2cff,_0x54971f++%(-0x194b+0x15c5+0x38a))?_0x534db9+=_0x4ab5e5['charCodeAt'](_0x15cf8b+(0x22f*-0x2+-0x2*-0xe91+-0x18ba*0x1))-(-0xb*0x34b+-0x1d00+0x4143*0x1)!==-0x23f+-0x1*0x26f9+-0x2938*-0x1?String['fromCharCode'](0x122c+0x2492+-0x35bf*0x1&_0x4e5387>>(-(0xec0+-0x1b4e+0xc90)*_0x54971f&-0x22fe+-0x11b*-0x1c+0x410)):_0x54971f:-0xbfe+0x7c1*0x3+-0xb45){_0x3a2cff=_0x5b33e9['indexOf'](_0x3a2cff);}for(let _0x1b8f19=-0x26*-0x6b+0x65a*0x1+-0x163c,_0x3d5d6e=_0x534db9['length'];_0x1b8f19<_0x3d5d6e;_0x1b8f19++){_0x495aac+='%'+('00'+_0x534db9['charCodeAt'](_0x1b8f19)['toString'](0x809+0x8*0x4bd+0x1b*-0x1b3))['slice'](-(0x1e45+0x699*0x5+-0x3f40));}return decodeURIComponent(_0x495aac);};_0x3926['xDIago']=_0x381aed,_0x511807=arguments,_0x3926['KqZNmy']=!![];}const _0x2c6380=_0x4dde07[0x17be+0x1*0x1fbb+-0x3779],_0xb39022=_0x235081+_0x2c6380,_0xcbf779=_0x511807[_0xb39022];if(!_0xcbf779){const _0x10eebc=function(_0x325df){this['inWmnf']=_0x325df,this['xHVuQg']=[-0x392+0x9a*-0x33+0x2241,0xb69+-0x13ae*0x1+0x845,-0x1f26+0xddd+0x1149],this['RbHvwE']=function(){return'newState';},this['xTPQVg']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['yHAlBt']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x10eebc['prototype']['IawkIf']=function(){const _0x596318=new RegExp(this['xTPQVg']+this['yHAlBt']),_0x4f86f9=_0x596318['test'](this['RbHvwE']['toString']())?--this['xHVuQg'][-0x2581+-0x2561*-0x1+0x21]:--this['xHVuQg'][-0x1d02+-0x2448+0x1*0x414a];return this['VQyBMv'](_0x4f86f9);},_0x10eebc['prototype']['VQyBMv']=function(_0xdb13bd){if(!Boolean(~_0xdb13bd))return _0xdb13bd;return this['AIyMmQ'](this['inWmnf']);},_0x10eebc['prototype']['AIyMmQ']=function(_0xe7877a){for(let _0x162483=-0x15d2+0x20*-0x2+0x235*0xa,_0x1b9031=this['xHVuQg']['length'];_0x162483<_0x1b9031;_0x162483++){this['xHVuQg']['push'](Math['round'](Math['random']())),_0x1b9031=this['xHVuQg']['length'];}return _0xe7877a(this['xHVuQg'][0x5*0x63b+-0x4*0x871+0x29d]);},new _0x10eebc(_0x3926)['IawkIf'](),_0x233fbe=_0x3926['xDIago'](_0x233fbe),_0x511807[_0xb39022]=_0x233fbe;}else _0x233fbe=_0xcbf779;return _0x233fbe;},_0x3926(_0x511807,_0x2f34eb);}global.user=undefined;global.xbsteam=new xbsteam();global.SteamTotp=SteamTotp;global.sc.wait=async function(timeout=2500){return await new Promise(async(resolve,reject)=>{await new Promise(resolve=>setTimeout(resolve,timeout));resolve();});};global.simpleObjectToMultipartForm=function(obj){let multipartForm={};for(let i in obj){multipartForm[i]={content:obj[i]};}return multipartForm;};console.clear();global.session=new SteamSession.LoginSession(SteamSession.EAuthTokenPlatformType.SteamClient);function _0xda0fee(_0x1dabcd,_0x1d35c3,_0x11e1e8,_0x295d58){const _0x8c6752={_0x1a7854:0x21b};return _0x3926(_0x1d35c3-_0x8c6752._0x1a7854,_0x1dabcd);}if(process.env.XBOT_USERNAME===undefined){console.log('Не установлен параметр XBOT_USERNAME');return;}if(process.env.XBOT_PASSWORD===undefined){console.log('Не установлен параметр XBOT_PASSWORD');return;}if(process.env.XBOT_SHARED_SECRET===undefined){console.log('Не установлен параметр XBOT_SHARED_SECRET');return;}if(process.env.XBOT_IDENTITY_SECRET===undefined){console.log('Не установлен параметр XBOT_IDENTITY_SECRET');return;}if(process.env.XBOT_API_KEY===undefined){console.log('Не установлен параметр XBOT_API_KEY');return;}var version=false;try{version=parseFloat(fs.readFileSync('.version','utf-8'));}catch{console.log('Файл .version не найден');}global.data={username:process.env.XBOT_USERNAME,password:process.env.XBOT_PASSWORD,sharedSecret:process.env.XBOT_SHARED_SECRET,identitySecret:process.env.XBOT_IDENTITY_SECRET,apiKey:process.env.XBOT_API_KEY,tickDelay:process.env.XBOT_TICK_DELAY??1000,ticks:{sendInventory:process.env.XBOT_TICKS_SEND_INVENTORY??60,sendOrders:process.env.XBOT_TICKS_SEND_ORDERS??60,ping:process.env.XBOT_TICKS_PING??30,checkConfirmations:process.env.XBOT_TICKS_SEND_CONFIRMATION??30,lastHistory:process.env.XBOT_TICKS_LAST_HISTORY??300},useragent:process.env.XBOT_USERAGENT??'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36',version:version,startTime:moment.now(),autoupdate:process.env.XBOT_AUTOUPDATE??false,needToSendConfirmations:true};if(process.env.XBOT_URL){process.env['NODE_TLS_REJECT_UNAUTHORIZED']=0;global.xbot_apiurl=process.env.XBOT_URL;}else{global.xbot_apiurl='https://xbot.gg/api/v1/smb/worker/';}global.sc.userAgent=data.userAgent;var loading_lastInc=0;var loading=function(){var h=['|','/','-','\\'];loading_lastInc=loading_lastInc>3?0:loading_lastInc;return h[loading_lastInc++];};global.header=function(tick){console.clear();console.log('['+loading()+'] Account: '+data.username+' | Auth code: '+getSteamGuardCode()+' | Uptime: '+moment.duration(moment.now()-data.startTime).humanize()+' | ver. '+global.data.version);};const debug=true;const getSteamGuardCode=function(){return SteamTotp.getAuthCode(data.sharedSecret);};const cookiesFile=global.data.username+'.auth.json';cookies=[];try{let data=fs.readFileSync(cookiesFile,'utf-8');let json=JSON.parse(data);cookies=json;}catch(err){console.error('Ошибка чтения или парсинга файла:',err);}global.sc.wait();global.sc.setCookies(cookies);lastsaved='';function _0x1b8dbf(_0x3a6f18,_0x2d8789,_0x3c397e,_0x56ca8d){return _0x3926(_0x56ca8d- -0x21b,_0x3a6f18);}saveCookies=function(cookies){try{var content=JSON.stringify(cookies);fs.writeFileSync(cookiesFile,content);lastsaved=cookies;}catch(err){console.error(err);}};global.log=function log(data){if(debug)console.log(data);};gCookies=null;const login=function(){return new Promise(async(resolve,reject)=>{global.session=new SteamSession.LoginSession(SteamSession.EAuthTokenPlatformType.SteamClient);global.session.on('authenticated',async()=>{console.log('Успешно авторизован в Steam');let cookies=await session.getWebCookies();saveCookies(cookies);global.sc.setCookies(cookies);saveCookies(cookies);loggedIn=true;if(global.xbot===undefined){global.xbot=new xbot();}resolve(session);});global.session.on('timeout',()=>{console.log('This login attempt has timed out.');reject(false);});global.session.on('error',err=>{console.log(`ERROR: This login attempt has failed! ${err.message}`);reject(err);});try{let username=global.data.username;let password=global.data.password;let startResult=await global.session.startWithCredentials({accountName:username,password:password,steamGuardCode:SteamTotp.getAuthCode(data.sharedSecret),agent:global.data.userAgent});if(startResult.actionRequired){let codeActionTypes=[SteamSession.EAuthSessionGuardType.EmailCode,SteamSession.EAuthSessionGuardType.DeviceCode];let codeAction=startResult.validActions.find(action=>codeActionTypes.includes(action.type));}}catch(ex){reject(ex);}});};global.xbot=new xbot();async function init(){let tickCounter=0;let loggedIn=await global.xbsteam.amILoggedIn();let toWait=1;while(true){if(global.data.autoupdate==1&&global.data.version!==false){if(tickCounter%300===0||tickCounter===1){console.log('Проверка обновлений бота');await axios.get('https://raw.githubusercontent.com/Autrikektor/xbot-worker/master/.version').then(function(response){console.log('Версия бота в репозитории: '+response.data);var remoteVer=parseFloat(response.data);if(remoteVer>0){if(remoteVer>global.data.version){console.log('Бот обновляется');console.log(execSync('git checkout -f .').toString());console.log(execSync('git pull').toString());console.log(execSync('npm upgrade --force --no-audit').toString());console.log(execSync('npm i --force --no-audit').toString());console.log('Перезапуск');process.exit(0);}else{console.log('Уже установлена последняя версия воркера');}}else{console.log('Ошибка получения обновлений');}});}}if(global.pause429===true){global.xbot.customLog(429,'Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');console.log('Бот приостановлен на 30 секунд из-за ошибки TooManyRequests');await new Promise(resolve=>setTimeout(resolve,1000*30*1));global.pause429=false;}try{global.header(tickCounter);if(tickCounter%300===0&&loggedIn===true){loggedIn=await global.xbsteam.amILoggedIn();console.log('Проверка авторизации Steam: '+(loggedIn?'авторизован':'не авторизован'));}if(!loggedIn){console.log('Попытка авторизации');global.sc.wait();global.sc.wait();toWait=0;await login().then(function(data){loggedIn=true;}).catch(function(err){toWait=1000*60*10;;console.log(err.eresult);if(err.eresult==84){console.log('Лимит попыток авторизации исчерпан, авторизация отлкадывается на 10 минут');toWait=1000*60*10;return;}console.log(err.eresult);loggedIn=false;});await new Promise(resolve=>setTimeout(resolve,toWait));}else{await global.xbot.loop(tickCounter);}}catch(ex){console.log(ex);}tickCounter++;}}init();